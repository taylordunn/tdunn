<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>tdunn: Predicting bike ridership: getting the data</title>

<meta property="description" itemprop="description" content="Part 1 of predicting bike ridership in Halifax, Nova Scotia. In this post,&#10;I retrieve and explore data from two open APIs."/>

<link rel="canonical" href="https://tdunn.ca/posts/2022-04-23-predicting-bike-ridership-getting-the-data/"/>
<link rel="icon" type="image/vnd.microsoft.icon" href="../../content/images/td.ico"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2022-04-27"/>
<meta property="article:created" itemprop="dateCreated" content="2022-04-27"/>
<meta name="article:author" content="Taylor Dunn"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="tdunn: Predicting bike ridership: getting the data"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Part 1 of predicting bike ridership in Halifax, Nova Scotia. In this post,&#10;I retrieve and explore data from two open APIs."/>
<meta property="og:url" content="https://tdunn.ca/posts/2022-04-23-predicting-bike-ridership-getting-the-data/"/>
<meta property="og:image" content="https://tdunn.ca/posts/2022-04-23-predicting-bike-ridership-getting-the-data/predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-35-1.png"/>
<meta property="og:image:width" content="1248"/>
<meta property="og:image:height" content="768"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="tdunn"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="tdunn: Predicting bike ridership: getting the data"/>
<meta property="twitter:description" content="Part 1 of predicting bike ridership in Halifax, Nova Scotia. In this post,&#10;I retrieve and explore data from two open APIs."/>
<meta property="twitter:url" content="https://tdunn.ca/posts/2022-04-23-predicting-bike-ridership-getting-the-data/"/>
<meta property="twitter:image" content="https://tdunn.ca/posts/2022-04-23-predicting-bike-ridership-getting-the-data/predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-35-1.png"/>
<meta property="twitter:image:width" content="1248"/>
<meta property="twitter:image:height" content="768"/>
<meta property="twitter:site" content="@TDunn12"/>
<meta property="twitter:creator" content="@TDunn12"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="tdunn: Predicting bike ridership: getting the data"/>
<meta name="citation_fulltext_html_url" content="https://tdunn.ca/posts/2022-04-23-predicting-bike-ridership-getting-the-data/"/>
<meta name="citation_online_date" content="2022/04/27"/>
<meta name="citation_publication_date" content="2022/04/27"/>
<meta name="citation_author" content="Taylor Dunn"/>
<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","params","categories","output","draft","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["Predicting bike ridership: getting the data"]},{"type":"character","attributes":{},"value":["Part 1 of predicting bike ridership in Halifax, Nova Scotia. In this post,\nI retrieve and explore data from two open APIs."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Taylor Dunn"]}]}]},{"type":"character","attributes":{},"value":["2022-04-27"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["date","slug"]}},"value":[{"type":"character","attributes":{},"value":["2022-04-27"]},{"type":"character","attributes":{},"value":["predicting-bike-ridership-getting-the-data"]}]},{"type":"character","attributes":{},"value":["R","API"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["https://tdunn.ca/posts/2022-04-23-predicting-bike-ridership-getting-the-data/"]},{"type":"character","attributes":{},"value":["https://tdunn.ca/posts/2022-04-23-predicting-bike-ridership-getting-the-data/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["predicting-bike-ridership-getting-the-data_cache-delete/html5/__packages","predicting-bike-ridership-getting-the-data_cache-delete/html5/bike-data_945915e89a1aa7fc3eb12c49bbe5d3d4.RData","predicting-bike-ridership-getting-the-data_cache-delete/html5/bike-data_945915e89a1aa7fc3eb12c49bbe5d3d4.rdb","predicting-bike-ridership-getting-the-data_cache-delete/html5/bike-data_945915e89a1aa7fc3eb12c49bbe5d3d4.rdx","predicting-bike-ridership-getting-the-data_cache-delete/html5/halifax-map_66e950d3f8c7c38ec32675e5923c4719.RData","predicting-bike-ridership-getting-the-data_cache-delete/html5/halifax-map_66e950d3f8c7c38ec32675e5923c4719.rdb","predicting-bike-ridership-getting-the-data_cache-delete/html5/halifax-map_66e950d3f8c7c38ec32675e5923c4719.rdx","predicting-bike-ridership-getting-the-data_cache-delete/html5/hrm-map_3483cfe1f10160173f1c65d73caf63ae.RData","predicting-bike-ridership-getting-the-data_cache-delete/html5/hrm-map_3483cfe1f10160173f1c65d73caf63ae.rdb","predicting-bike-ridership-getting-the-data_cache-delete/html5/hrm-map_3483cfe1f10160173f1c65d73caf63ae.rdx","predicting-bike-ridership-getting-the-data_cache-delete/html5/n-records_fcaec4479b96a96584665dcc2ea33ab0.RData","predicting-bike-ridership-getting-the-data_cache-delete/html5/n-records_fcaec4479b96a96584665dcc2ea33ab0.rdb","predicting-bike-ridership-getting-the-data_cache-delete/html5/n-records_fcaec4479b96a96584665dcc2ea33ab0.rdx","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-1_8cbd3af8c9b5ad6bda371e8a562c8de0.RData","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-1_8cbd3af8c9b5ad6bda371e8a562c8de0.rdb","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-1_8cbd3af8c9b5ad6bda371e8a562c8de0.rdx","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-dockyard_1dd83b252b9a90efb621f50396aafa27.RData","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-dockyard_1dd83b252b9a90efb621f50396aafa27.rdb","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-dockyard_1dd83b252b9a90efb621f50396aafa27.rdx","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-stations-1_b766e32f0808ffc93339d708adcf2de8.RData","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-stations-1_b766e32f0808ffc93339d708adcf2de8.rdb","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-stations-1_b766e32f0808ffc93339d708adcf2de8.rdx","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-stations-2_8803e89156ac74404db548621b5d2a4a.RData","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-stations-2_8803e89156ac74404db548621b5d2a4a.rdb","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-stations-2_8803e89156ac74404db548621b5d2a4a.rdx","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-windsor_96e564e461a47639fcd524a16dddc5a7.RData","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-windsor_96e564e461a47639fcd524a16dddc5a7.rdb","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-climate-windsor_96e564e461a47639fcd524a16dddc5a7.rdx","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-collections_0e56e0af60951bfc7d9fedc655d8ffd1.RData","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-collections_0e56e0af60951bfc7d9fedc655d8ffd1.rdb","predicting-bike-ridership-getting-the-data_cache-delete/html5/resp-collections_0e56e0af60951bfc7d9fedc655d8ffd1.rdx","predicting-bike-ridership-getting-the-data_files/anchor-4.2.2/anchor.min.js","predicting-bike-ridership-getting-the-data_files/bowser-1.9.3/bowser.min.js","predicting-bike-ridership-getting-the-data_files/distill-2.2.21/template.v2.js","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-15-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-16-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-17-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-18-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-19-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-20-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-21-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-22-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-23-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-24-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-25-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-35-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-36-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-39-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-40-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-47-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-48-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-49-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-50-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-51-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-52-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-53-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-54-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-55-1.png","predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-57-1.png","predicting-bike-ridership-getting-the-data_files/header-attrs-2.11/header-attrs.js","predicting-bike-ridership-getting-the-data_files/jquery-3.6.0/jquery-3.6.0.js","predicting-bike-ridership-getting-the-data_files/jquery-3.6.0/jquery-3.6.0.min.js","predicting-bike-ridership-getting-the-data_files/jquery-3.6.0/jquery-3.6.0.min.map","predicting-bike-ridership-getting-the-data_files/pagedtable-1.1/css/pagedtable.css","predicting-bike-ridership-getting-the-data_files/pagedtable-1.1/js/pagedtable.js","predicting-bike-ridership-getting-the-data_files/popper-2.6.0/popper.min.js","predicting-bike-ridership-getting-the-data_files/tippy-6.2.7/tippy-bundle.umd.min.js","predicting-bike-ridership-getting-the-data_files/tippy-6.2.7/tippy-light-border.css","predicting-bike-ridership-getting-the-data_files/tippy-6.2.7/tippy.css","predicting-bike-ridership-getting-the-data_files/tippy-6.2.7/tippy.umd.min.js","predicting-bike-ridership-getting-the-data_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        return "<p>" + $('#ref-' + ref).html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */
@import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed');
@import url('https://fonts.googleapis.com/css2?family=Fira+Code');

html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       12px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    'Roboto Condensed', sans-serif;
  --mono-font:       'Fira Code', monospace;
  --body-font:       'Roboto Condensed', sans-serif;
  --navbar-font:     'Roboto Condensed', sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */

/* Change code snippet background color */
/* https://github.com/rstudio/distill/issues/298#issuecomment-766374934 */
d-article div.sourceCode pre {
  background: #f5f5f5;
}

code {
  background-color: #f5f5f5;
}

d-article pre {
  background-color: #f5f5f5;
}

/* Reduce the spacing between bullet points */
ul li {
  padding: 0px 0px;
  margin-bottom: 0px;
}

/* Trying to adjust the post preview image size
/*.posts-list .post-preview .thumbnail img {
  max-width: 100%;
}*/</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.11/header-attrs.js"></script>
  <link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
  <script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    if (!/posts/.test(location.pathname)) {
      return;
    }

    var script = document.createElement("script");
    script.src = "https://utteranc.es/client.js";
    script.setAttribute("repo", "taylordunn/tdunn");
    script.setAttribute("issue-term", "title");
    script.setAttribute("crossorigin", "anonymous");
    script.setAttribute("label", "comment");
    script.setAttribute("theme", "github-light");

    /* wait for article to load, append script to article element */
    var observer = new MutationObserver(function (mutations, observer) {
      var article = document.querySelector("d-article");
      if (article) {
        observer.disconnect();
        /* HACK: article scroll */
        article.setAttribute("style", "overflow-y: hidden");
        article.appendChild(script);
      }
    });

    observer.observe(document.body, { childList: true });
  });
</script>

<!-- <script src="https://utteranc.es/client.js" -->
<!--         repo="sciencificity/Blog_Vebash" -->
<!--         issue-term="title" -->
<!--         label="comments 💬" -->
<!--         theme="github-light" -->
<!--         crossorigin="anonymous" -->
<!--         async> -->
<!-- </script> -->

<script type="text/javascript" cookie-consent="tracking" async src="https://www.googletagmanager.com/gtag/js?id=UA-196523553-1"></script>
<script type="text/javascript" cookie-consent="tracking">
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-196523553-1');
</script>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Predicting bike ridership: getting the data","description":"Part 1 of predicting bike ridership in Halifax, Nova Scotia. In this post,\nI retrieve and explore data from two open APIs.","authors":[{"author":"Taylor Dunn","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-04-27T00:00:00.000+00:00","citationText":"Dunn, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">tdunn</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Posts</a>
<a href="../../content/docs/tdunn-cv.html">About</a>
<a href="../../content/docs/tdunn-cv.html">CV</a>
<a href="../../projects.html">Projects</a>
<a href="https://twitter.com/TDunn12">
<i class="fa fa-twitter" aria-hidden="true"></i>
</a>
<a href="https://github.com/taylordunn">
<i class="fa fa-github" aria-hidden="true"></i>
</a>
<a href="https://www.linkedin.com/in/taylor-dunn-83090843/">
<i class="fa fa-linkedin" aria-hidden="true"></i>
</a>
<a href="../../index.xml">
<i class="fa fa-rss" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Predicting bike ridership: getting the data</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:R" class="dt-tag">R</a>
  <a href="../../index.html#category:API" class="dt-tag">API</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>Part 1 of predicting bike ridership in Halifax, Nova Scotia. In this post, I retrieve and explore data from two open APIs.</p></p>
</div>

<div class="d-byline">
  Taylor Dunn  
  
<br/>2022-04-27
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#getting-bicycle-count-data">Getting bicycle count data</a>
<ul>
<li><a href="#eda-and-cleaning">EDA and cleaning</a></li>
</ul></li>
<li><a href="#getting-weather-data">Getting weather data</a>
<ul>
<li><a href="#eda-and-cleaning-1">EDA and cleaning</a></li>
</ul></li>
<li><a href="#combining-the-data">Combining the data</a></li>
<li><a href="#reproducibility">Reproducibility</a></li>
</ul>
</nav>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Setup
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>knitr</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/knitr/man/opts_chunk.html'>opts_chunk</a></span><span class='op'>$</span><span class='fu'>set</span><span class='op'>(</span>echo <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://httr.r-lib.org/'>httr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://lubridate.tidyverse.org'>lubridate</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://gt.rstudio.com/'>gt</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/tidyverse/glue'>glue</a></span><span class='op'>)</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/taylordunn/dunnr'>dunnr</a></span><span class='op'>)</span>
<span class='fu'>extrafont</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/extrafont/man/loadfonts.html'>loadfonts</a></span><span class='op'>(</span>device <span class='op'>=</span> <span class='st'>"win"</span>, quiet <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme_get.html'>theme_set</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/dunnr/man/theme_td.html'>theme_td</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/dunnr/man/set_geom_fonts.html'>set_geom_fonts</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/dunnr/man/set_palette.html'>set_palette</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h2 id="introduction">Introduction</h2>
<p>In 2016, the city of Halifax <a href="https://www.cbc.ca/news/canada/nova-scotia/data-tracker-eco-counter-cycling-bike-agricola-street-halifax-cycling-coalition-1.3812404">installed its first cyclist tracker on Agricola Street</a>. Last year, the city made bike counter data available on their <a href="https://catalogue-hrm.opendata.arcgis.com/datasets/45d4ecb0cb48469186e683ebc54eb188_0/about">open data platform</a>. As a cyclist and Haligonian, this is of course interesting to me personally. As a data scientist, this seems like a nice opportunity to work through a machine learning project end-to-end: from retrieving, exploring, and processing the data, to building and evaluating models, to producing an end product. (A REST API? A Shiny app? TBD.)</p>
<p>In this post, I get and explore data from two sources: (1) the aforementioned bike counter data from city of Halifax, and (2) historical weather data from the government of Canada.</p>
<h2 id="getting-bicycle-count-data">Getting bicycle count data</h2>
<p>The bicycle counts were easy enough to find on Halifax’s platform: <a href="https://catalogue-hrm.opendata.arcgis.com/datasets/45d4ecb0cb48469186e683ebc54eb188_0/explore?showTable=true" class="uri">https://catalogue-hrm.opendata.arcgis.com/datasets/45d4ecb0cb48469186e683ebc54eb188_0/explore?showTable=true</a>. Each data set comes with a nice <a href="https://catalogue-hrm.opendata.arcgis.com/datasets/45d4ecb0cb48469186e683ebc54eb188_0/api">API explorer</a> for constructing queries. I’ll use <code>httr</code> to GET the data with the basic query provided there:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>query_url</span> <span class='op'>&lt;-</span> <span class='st'>"https://services2.arcgis.com/11XBiaBYA9Ep0yNJ/arcgis/rest/services/Bicycle_Counts/FeatureServer/0/query?where=1%3D1&amp;outFields=*&amp;outSR=4326&amp;f=json"</span>
<span class='va'>resp</span> <span class='op'>&lt;-</span> <span class='fu'>httr</span><span class='fu'>::</span><span class='fu'><a href='https://httr.r-lib.org/reference/GET.html'>GET</a></span><span class='op'>(</span><span class='va'>query_url</span><span class='op'>)</span>
<span class='va'>resp</span>
</code></pre>
</div>
<pre><code>Response [https://services2.arcgis.com/11XBiaBYA9Ep0yNJ/arcgis/rest/services/Bicycle_Counts/FeatureServer/0/query?where=1%3D1&amp;outFields=*&amp;outSR=4326&amp;f=json]
  Date: 2022-04-27 03:26
  Status: 200
  Content-Type: application/json; charset=utf-8
  Size: 579 kB</code></pre>
</div>
<p>The response code (200) indicates a successful connection. The data comes in JSON format, which I can parse to an R list with:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>parsed_content</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://httr.r-lib.org/reference/content.html'>content</a></span><span class='op'>(</span><span class='va'>resp</span>, as <span class='op'>=</span> <span class='st'>"parsed"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>parsed_content</span>, max.level <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>List of 6
 $ objectIdFieldName    : chr &quot;ObjectId&quot;
 $ uniqueIdField        :List of 2
 $ globalIdFieldName    : chr &quot;&quot;
 $ fields               :List of 11
 $ exceededTransferLimit: logi TRUE
 $ features             :List of 2000</code></pre>
</div>
<p>This returned a list of 6 items. The <code>fields</code> item is a list of variables:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fields</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_dfr</a></span><span class='op'>(</span>
  <span class='va'>parsed_content</span><span class='op'>$</span><span class='va'>fields</span>,
  <span class='co'># Drop NULL elements so I can convert to a tibble</span>
  <span class='op'>~</span> <span class='fu'><a href='https://purrr.tidyverse.org/reference/keep.html'>discard</a></span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>is.null</span><span class='op'>)</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'><a href='https://gt.rstudio.com/reference/gt.html'>gt</a></span><span class='op'>(</span><span class='va'>fields</span><span class='op'>)</span>
</code></pre>
</div>
<div id="bjedppaiiw" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#bjedppaiiw .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bjedppaiiw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bjedppaiiw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bjedppaiiw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bjedppaiiw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bjedppaiiw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bjedppaiiw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bjedppaiiw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bjedppaiiw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bjedppaiiw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bjedppaiiw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bjedppaiiw .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#bjedppaiiw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bjedppaiiw .gt_from_md > :first-child {
  margin-top: 0;
}

#bjedppaiiw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bjedppaiiw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bjedppaiiw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#bjedppaiiw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bjedppaiiw .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#bjedppaiiw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bjedppaiiw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bjedppaiiw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bjedppaiiw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bjedppaiiw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bjedppaiiw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#bjedppaiiw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bjedppaiiw .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#bjedppaiiw .gt_left {
  text-align: left;
}

#bjedppaiiw .gt_center {
  text-align: center;
}

#bjedppaiiw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bjedppaiiw .gt_font_normal {
  font-weight: normal;
}

#bjedppaiiw .gt_font_bold {
  font-weight: bold;
}

#bjedppaiiw .gt_font_italic {
  font-style: italic;
}

#bjedppaiiw .gt_super {
  font-size: 65%;
}

#bjedppaiiw .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">alias</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">sqlType</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">length</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">CHANNEL_ID</td>
<td class="gt_row gt_left">esriFieldTypeString</td>
<td class="gt_row gt_left">CHANNEL_ID</td>
<td class="gt_row gt_left">sqlTypeNVarchar</td>
<td class="gt_row gt_right">256</td></tr>
    <tr><td class="gt_row gt_left">CHANNEL_NAME</td>
<td class="gt_row gt_left">esriFieldTypeString</td>
<td class="gt_row gt_left">CHANNEL_NAME</td>
<td class="gt_row gt_left">sqlTypeNVarchar</td>
<td class="gt_row gt_right">4000</td></tr>
    <tr><td class="gt_row gt_left">SERIAL_NUMBER</td>
<td class="gt_row gt_left">esriFieldTypeString</td>
<td class="gt_row gt_left">SERIAL_NUMBER</td>
<td class="gt_row gt_left">sqlTypeNVarchar</td>
<td class="gt_row gt_right">4000</td></tr>
    <tr><td class="gt_row gt_left">SITE_NAME</td>
<td class="gt_row gt_left">esriFieldTypeString</td>
<td class="gt_row gt_left">SITE_NAME</td>
<td class="gt_row gt_left">sqlTypeNVarchar</td>
<td class="gt_row gt_right">4000</td></tr>
    <tr><td class="gt_row gt_left">LATITUDE</td>
<td class="gt_row gt_left">esriFieldTypeDouble</td>
<td class="gt_row gt_left">LATITUDE</td>
<td class="gt_row gt_left">sqlTypeFloat</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_left">LONGITUDE</td>
<td class="gt_row gt_left">esriFieldTypeDouble</td>
<td class="gt_row gt_left">LONGITUDE</td>
<td class="gt_row gt_left">sqlTypeFloat</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_left">INSTALLATION_DATE</td>
<td class="gt_row gt_left">esriFieldTypeDate</td>
<td class="gt_row gt_left">INSTALLATION_DATE</td>
<td class="gt_row gt_left">sqlTypeTimestamp2</td>
<td class="gt_row gt_right">8</td></tr>
    <tr><td class="gt_row gt_left">COUNT_DATETIME</td>
<td class="gt_row gt_left">esriFieldTypeDate</td>
<td class="gt_row gt_left">COUNT_DATETIME</td>
<td class="gt_row gt_left">sqlTypeTimestamp2</td>
<td class="gt_row gt_right">8</td></tr>
    <tr><td class="gt_row gt_left">COUNTER_TYPE</td>
<td class="gt_row gt_left">esriFieldTypeString</td>
<td class="gt_row gt_left">COUNTER_TYPE</td>
<td class="gt_row gt_left">sqlTypeNVarchar</td>
<td class="gt_row gt_right">4000</td></tr>
    <tr><td class="gt_row gt_left">COUNTER_VALUE</td>
<td class="gt_row gt_left">esriFieldTypeInteger</td>
<td class="gt_row gt_left">COUNTER_VALUE</td>
<td class="gt_row gt_left">sqlTypeInteger</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_left">ObjectId</td>
<td class="gt_row gt_left">esriFieldTypeOID</td>
<td class="gt_row gt_left">ObjectId</td>
<td class="gt_row gt_left">sqlTypeInteger</td>
<td class="gt_row gt_right">NA</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<p>The data is the <code>features</code> item, which itself is a list of length 2000. Here is the first element:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>parsed_content</span><span class='op'>$</span><span class='va'>features</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>$attributes
$attributes$CHANNEL_ID
[1] &quot;100059339&quot;

$attributes$CHANNEL_NAME
[1] &quot;Hollis St&quot;

$attributes$SERIAL_NUMBER
[1] &quot;X2H20032465&quot;

$attributes$SITE_NAME
[1] &quot;Hollis St&quot;

$attributes$LATITUDE
[1] 44.64799

$attributes$LONGITUDE
[1] -63.57352

$attributes$INSTALLATION_DATE
[1] 1.594166e+12

$attributes$COUNT_DATETIME
[1] 1.595966e+12

$attributes$COUNTER_TYPE
[1] &quot;Bicycle&quot;

$attributes$COUNTER_VALUE
[1] 2

$attributes$ObjectId
[1] 1</code></pre>
</div>
<p>Looks like there is another level of nesting with <code>attributes</code>. Compile all of these elements into a single data frame:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_counts</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_dfr</a></span><span class='op'>(</span>
  <span class='va'>parsed_content</span><span class='op'>$</span><span class='va'>features</span>,
  <span class='op'>~</span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span><span class='op'>(</span><span class='va'>.x</span><span class='op'>$</span><span class='va'>attributes</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='op'>(</span><span class='va'>bike_counts</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 2,000
Columns: 11
$ CHANNEL_ID        &lt;chr&gt; &quot;100059339&quot;, &quot;100059339&quot;, &quot;100059339&quot;, &quot;10~
$ CHANNEL_NAME      &lt;chr&gt; &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Ho~
$ SERIAL_NUMBER     &lt;chr&gt; &quot;X2H20032465&quot;, &quot;X2H20032465&quot;, &quot;X2H20032465~
$ SITE_NAME         &lt;chr&gt; &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Ho~
$ LATITUDE          &lt;dbl&gt; 44.64799, 44.64799, 44.64799, 44.64799, 44~
$ LONGITUDE         &lt;dbl&gt; -63.57352, -63.57352, -63.57352, -63.57352~
$ INSTALLATION_DATE &lt;dbl&gt; 1.594166e+12, 1.594166e+12, 1.594166e+12, ~
$ COUNT_DATETIME    &lt;dbl&gt; 1.595966e+12, 1.595970e+12, 1.595974e+12, ~
$ COUNTER_TYPE      &lt;chr&gt; &quot;Bicycle&quot;, &quot;Bicycle&quot;, &quot;Bicycle&quot;, &quot;Bicycle&quot;~
$ COUNTER_VALUE     &lt;int&gt; 2, 1, 2, 2, 0, 0, 0, 0, 0, 0, 6, 4, 13, 8,~
$ ObjectId          &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,~</code></pre>
</div>
<p>Note that just 2000 records were returned. The <code>exceededTransferLimit = TRUE</code> value tells us that this is the limit of the API. I can get the total count of records by altering the original query slightly:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>n_records</span> <span class='op'>&lt;-</span> <span class='fu'>httr</span><span class='fu'>::</span><span class='fu'><a href='https://httr.r-lib.org/reference/GET.html'>GET</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>query_url</span>, <span class='st'>"&amp;returnCountOnly=true"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://httr.r-lib.org/reference/content.html'>content</a></span><span class='op'>(</span>as <span class='op'>=</span> <span class='st'>"parsed"</span><span class='op'>)</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span>use.names <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>n_records</span>
</code></pre>
</div>
<pre><code>[1] 124356</code></pre>
</div>
<p>So to get all of the data at 2000 records per request, I’ll have to make a minimum of 63 calls to the API. The API offers a “resultOffset” argument to get records in sequence. Make a function to get 2000 records for a given offset:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>get_bike_data</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>offset</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='co'># Need to prevent scientific notation, e.g. "1e+05" instead of "100000"</span>
  <span class='va'>offset</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/format.html'>format</a></span><span class='op'>(</span><span class='va'>offset</span>, scientific <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
  
  <span class='va'>parsed_content</span> <span class='op'>&lt;-</span> <span class='fu'>httr</span><span class='fu'>::</span><span class='fu'><a href='https://httr.r-lib.org/reference/GET.html'>GET</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>query_url</span>, <span class='st'>"&amp;resultOffset="</span>, <span class='va'>offset</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span>
    <span class='fu'><a href='https://httr.r-lib.org/reference/content.html'>content</a></span><span class='op'>(</span>as <span class='op'>=</span> <span class='st'>"parsed"</span><span class='op'>)</span>
  
  <span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_dfr</a></span><span class='op'>(</span>
    <span class='va'>parsed_content</span><span class='op'>$</span><span class='va'>features</span>,
    <span class='op'>~</span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span><span class='op'>(</span><span class='va'>.x</span><span class='op'>$</span><span class='va'>attributes</span><span class='op'>)</span>
  <span class='op'>)</span> 
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>And combine it all into a single data frame:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_dfr</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>ceiling</a></span><span class='op'>(</span><span class='va'>n_records</span> <span class='op'>/</span> <span class='fl'>2000</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='op'>~</span> <span class='fu'>get_bike_data</span><span class='op'>(</span>offset <span class='op'>=</span> <span class='va'>.x</span> <span class='op'>*</span> <span class='fl'>2000</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='op'>(</span><span class='va'>bike_data</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 124,356
Columns: 11
$ CHANNEL_ID        &lt;chr&gt; &quot;100059339&quot;, &quot;100059339&quot;, &quot;100059339&quot;, &quot;10~
$ CHANNEL_NAME      &lt;chr&gt; &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Ho~
$ SERIAL_NUMBER     &lt;chr&gt; &quot;X2H20032465&quot;, &quot;X2H20032465&quot;, &quot;X2H20032465~
$ SITE_NAME         &lt;chr&gt; &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Ho~
$ LATITUDE          &lt;dbl&gt; 44.64799, 44.64799, 44.64799, 44.64799, 44~
$ LONGITUDE         &lt;dbl&gt; -63.57352, -63.57352, -63.57352, -63.57352~
$ INSTALLATION_DATE &lt;dbl&gt; 1.594166e+12, 1.594166e+12, 1.594166e+12, ~
$ COUNT_DATETIME    &lt;dbl&gt; 1.595966e+12, 1.595970e+12, 1.595974e+12, ~
$ COUNTER_TYPE      &lt;chr&gt; &quot;Bicycle&quot;, &quot;Bicycle&quot;, &quot;Bicycle&quot;, &quot;Bicycle&quot;~
$ COUNTER_VALUE     &lt;int&gt; 2, 1, 2, 2, 0, 0, 0, 0, 0, 0, 6, 4, 13, 8,~
$ ObjectId          &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,~</code></pre>
</div>
<p>This returned 124356 records, as expected. The <code>ObjectId</code> should be a unique sequential identifier from 1 to 124356, which I’ll check:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/range.html'>range</a></span><span class='op'>(</span><span class='va'>bike_data</span><span class='op'>$</span><span class='va'>ObjectId</span><span class='op'>)</span>; <span class='fu'><a href='https://dplyr.tidyverse.org/reference/n_distinct.html'>n_distinct</a></span><span class='op'>(</span><span class='va'>bike_data</span><span class='op'>$</span><span class='va'>ObjectId</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1]      1 124356</code></pre>
<pre><code>[1] 124356</code></pre>
</div>
<h3 id="eda-and-cleaning">EDA and cleaning</h3>
<p>First thing I usually do with a new data set is clean the column names:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data</span> <span class='op'>&lt;-</span> <span class='fu'>janitor</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='va'>bike_data</span><span class='op'>)</span>
<span class='fu'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='op'>(</span><span class='va'>bike_data</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 124,356
Columns: 11
$ channel_id        &lt;chr&gt; &quot;100059339&quot;, &quot;100059339&quot;, &quot;100059339&quot;, &quot;10~
$ channel_name      &lt;chr&gt; &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Ho~
$ serial_number     &lt;chr&gt; &quot;X2H20032465&quot;, &quot;X2H20032465&quot;, &quot;X2H20032465~
$ site_name         &lt;chr&gt; &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Hollis St&quot;, &quot;Ho~
$ latitude          &lt;dbl&gt; 44.64799, 44.64799, 44.64799, 44.64799, 44~
$ longitude         &lt;dbl&gt; -63.57352, -63.57352, -63.57352, -63.57352~
$ installation_date &lt;dbl&gt; 1.594166e+12, 1.594166e+12, 1.594166e+12, ~
$ count_datetime    &lt;dbl&gt; 1.595966e+12, 1.595970e+12, 1.595974e+12, ~
$ counter_type      &lt;chr&gt; &quot;Bicycle&quot;, &quot;Bicycle&quot;, &quot;Bicycle&quot;, &quot;Bicycle&quot;~
$ counter_value     &lt;int&gt; 2, 1, 2, 2, 0, 0, 0, 0, 0, 0, 6, 4, 13, 8,~
$ object_id         &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,~</code></pre>
</div>
<p>Next I want to deal with the <code>installation_date</code> and <code>count_datetime</code> variables, which are very large integers. From <code>fields</code> above, the data type for these variables is <code>esriFieldTypeDate</code>. After some digging on Google, turns out this is Unix time (the number of milliseconds since January 1, 1970; also called epoch time). With <code>as.POSIXct()</code>, I can supply the number of seconds and set <code>origin = "1970-01-01"</code> to get back the correct datetime objects:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data</span> <span class='op'>&lt;-</span> <span class='va'>bike_data</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/across.html'>across</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>installation_date</span>, <span class='va'>count_datetime</span><span class='op'>)</span>,
           <span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/as.POSIXlt.html'>as.POSIXct</a></span><span class='op'>(</span><span class='va'>.x</span> <span class='op'>/</span> <span class='fl'>1000</span>, tz <span class='op'>=</span> <span class='st'>"UTC"</span>, origin <span class='op'>=</span> <span class='st'>"1970-01-01"</span><span class='op'>)</span><span class='op'>)</span>,
    <span class='co'># These are just dates, the time of day doesn't matter</span>
    installation_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>installation_date</span><span class='op'>)</span>,
    <span class='co'># I'll also want the date without time of day</span>
    count_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>count_datetime</span><span class='op'>)</span>
  <span class='op'>)</span>
</code></pre>
</div>
</div>
<p>These variables are unique to the sites:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>site_name</span>, <span class='va'>latitude</span>, <span class='va'>longitude</span>, <span class='va'>serial_number</span>, <span class='va'>installation_date</span>,
        <span class='va'>counter_type</span>, name <span class='op'>=</span> <span class='st'>"n_records"</span><span class='op'>)</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://gt.rstudio.com/reference/gt.html'>gt</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div id="esewwercsc" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#esewwercsc .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#esewwercsc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#esewwercsc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#esewwercsc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#esewwercsc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#esewwercsc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#esewwercsc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#esewwercsc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#esewwercsc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#esewwercsc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#esewwercsc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#esewwercsc .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#esewwercsc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#esewwercsc .gt_from_md > :first-child {
  margin-top: 0;
}

#esewwercsc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#esewwercsc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#esewwercsc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#esewwercsc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#esewwercsc .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#esewwercsc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#esewwercsc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#esewwercsc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#esewwercsc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#esewwercsc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#esewwercsc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#esewwercsc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#esewwercsc .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#esewwercsc .gt_left {
  text-align: left;
}

#esewwercsc .gt_center {
  text-align: center;
}

#esewwercsc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#esewwercsc .gt_font_normal {
  font-weight: normal;
}

#esewwercsc .gt_font_bold {
  font-weight: bold;
}

#esewwercsc .gt_font_italic {
  font-style: italic;
}

#esewwercsc .gt_super {
  font-size: 65%;
}

#esewwercsc .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">site_name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">latitude</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">longitude</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">serial_number</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">installation_date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">counter_type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">n_records</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Dartmouth Harbourfront Greenway</td>
<td class="gt_row gt_right">44.66436</td>
<td class="gt_row gt_right">-63.55736</td>
<td class="gt_row gt_left">X2H20114473</td>
<td class="gt_row gt_left">2021-07-08</td>
<td class="gt_row gt_left">Bicycle</td>
<td class="gt_row gt_right">13976</td></tr>
    <tr><td class="gt_row gt_left">Hollis St</td>
<td class="gt_row gt_right">44.64799</td>
<td class="gt_row gt_right">-63.57352</td>
<td class="gt_row gt_left">X2H20032465</td>
<td class="gt_row gt_left">2020-07-08</td>
<td class="gt_row gt_left">Bicycle</td>
<td class="gt_row gt_right">15748</td></tr>
    <tr><td class="gt_row gt_left">South Park St</td>
<td class="gt_row gt_right">44.64194</td>
<td class="gt_row gt_right">-63.57972</td>
<td class="gt_row gt_left">X2H19070467</td>
<td class="gt_row gt_left">2019-09-01</td>
<td class="gt_row gt_left">Bicycle</td>
<td class="gt_row gt_right">46424</td></tr>
    <tr><td class="gt_row gt_left">Vernon St</td>
<td class="gt_row gt_right">44.64292</td>
<td class="gt_row gt_right">-63.59154</td>
<td class="gt_row gt_left">X2H20114470</td>
<td class="gt_row gt_left">2020-12-09</td>
<td class="gt_row gt_left">Bicycle</td>
<td class="gt_row gt_right">24104</td></tr>
    <tr><td class="gt_row gt_left">Windsor St</td>
<td class="gt_row gt_right">44.65466</td>
<td class="gt_row gt_right">-63.60368</td>
<td class="gt_row gt_left">X2H20114472</td>
<td class="gt_row gt_left">2020-12-09</td>
<td class="gt_row gt_left">Bicycle</td>
<td class="gt_row gt_right">24104</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<p>Drop <code>serial_number</code> and <code>counter_type</code>, which aren’t useful.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data</span> <span class='op'>&lt;-</span> <span class='va'>bike_data</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>serial_number</span>, <span class='op'>-</span><span class='va'>counter_type</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Sites can have multiple channels:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>site_name</span>, <span class='va'>channel_name</span>, <span class='va'>channel_id</span>, name <span class='op'>=</span> <span class='st'>"n_records"</span><span class='op'>)</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://gt.rstudio.com/reference/gt.html'>gt</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div id="qtrgtrpxmd" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#qtrgtrpxmd .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qtrgtrpxmd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qtrgtrpxmd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qtrgtrpxmd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qtrgtrpxmd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qtrgtrpxmd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qtrgtrpxmd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qtrgtrpxmd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qtrgtrpxmd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qtrgtrpxmd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qtrgtrpxmd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qtrgtrpxmd .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#qtrgtrpxmd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qtrgtrpxmd .gt_from_md > :first-child {
  margin-top: 0;
}

#qtrgtrpxmd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qtrgtrpxmd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qtrgtrpxmd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#qtrgtrpxmd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qtrgtrpxmd .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#qtrgtrpxmd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qtrgtrpxmd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qtrgtrpxmd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qtrgtrpxmd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qtrgtrpxmd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qtrgtrpxmd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#qtrgtrpxmd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qtrgtrpxmd .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#qtrgtrpxmd .gt_left {
  text-align: left;
}

#qtrgtrpxmd .gt_center {
  text-align: center;
}

#qtrgtrpxmd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qtrgtrpxmd .gt_font_normal {
  font-weight: normal;
}

#qtrgtrpxmd .gt_font_bold {
  font-weight: bold;
}

#qtrgtrpxmd .gt_font_italic {
  font-style: italic;
}

#qtrgtrpxmd .gt_super {
  font-size: 65%;
}

#qtrgtrpxmd .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">site_name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">channel_name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">channel_id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">n_records</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Dartmouth Harbourfront Greenway</td>
<td class="gt_row gt_left">Dartmouth Harbourfront Greenway Northbound</td>
<td class="gt_row gt_left">353280085</td>
<td class="gt_row gt_right">6988</td></tr>
    <tr><td class="gt_row gt_left">Dartmouth Harbourfront Greenway</td>
<td class="gt_row gt_left">Dartmouth Harbourfront Greenway Southbound</td>
<td class="gt_row gt_left">353280086</td>
<td class="gt_row gt_right">6988</td></tr>
    <tr><td class="gt_row gt_left">Hollis St</td>
<td class="gt_row gt_left">Hollis St</td>
<td class="gt_row gt_left">100059339</td>
<td class="gt_row gt_right">15748</td></tr>
    <tr><td class="gt_row gt_left">South Park St</td>
<td class="gt_row gt_left">South Park St Northbound</td>
<td class="gt_row gt_left">101054257</td>
<td class="gt_row gt_right">23212</td></tr>
    <tr><td class="gt_row gt_left">South Park St</td>
<td class="gt_row gt_left">South Park St Southbound</td>
<td class="gt_row gt_left">102054257</td>
<td class="gt_row gt_right">23212</td></tr>
    <tr><td class="gt_row gt_left">Vernon St</td>
<td class="gt_row gt_left">Vernon St Northbound</td>
<td class="gt_row gt_left">353252897</td>
<td class="gt_row gt_right">12052</td></tr>
    <tr><td class="gt_row gt_left">Vernon St</td>
<td class="gt_row gt_left">Vernon St Southbound</td>
<td class="gt_row gt_left">353252898</td>
<td class="gt_row gt_right">12052</td></tr>
    <tr><td class="gt_row gt_left">Windsor St</td>
<td class="gt_row gt_left">Windsor St Northbound</td>
<td class="gt_row gt_left">353252910</td>
<td class="gt_row gt_right">12052</td></tr>
    <tr><td class="gt_row gt_left">Windsor St</td>
<td class="gt_row gt_left">Windsor St Southbound</td>
<td class="gt_row gt_left">353252909</td>
<td class="gt_row gt_right">12052</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<p>All but the Hollis St site has separate northbound and southbound channels.</p>
<p>For each site, check the <code>installation_date</code> relative to the range of <code>count_date</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>site_name</span>, <span class='va'>installation_date</span><span class='op'>)</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>min_count_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>count_date</span><span class='op'>)</span>, max_count_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>count_date</span><span class='op'>)</span>,
            .groups <span class='op'>=</span> <span class='st'>"drop"</span><span class='op'>)</span> <span class='op'><a href='https://gt.rstudio.com/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://gt.rstudio.com/reference/gt.html'>gt</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div id="nohfovbgus" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#nohfovbgus .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nohfovbgus .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nohfovbgus .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nohfovbgus .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nohfovbgus .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nohfovbgus .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nohfovbgus .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nohfovbgus .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nohfovbgus .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nohfovbgus .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nohfovbgus .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nohfovbgus .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#nohfovbgus .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nohfovbgus .gt_from_md > :first-child {
  margin-top: 0;
}

#nohfovbgus .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nohfovbgus .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nohfovbgus .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#nohfovbgus .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nohfovbgus .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#nohfovbgus .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nohfovbgus .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nohfovbgus .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nohfovbgus .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nohfovbgus .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nohfovbgus .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#nohfovbgus .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nohfovbgus .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#nohfovbgus .gt_left {
  text-align: left;
}

#nohfovbgus .gt_center {
  text-align: center;
}

#nohfovbgus .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nohfovbgus .gt_font_normal {
  font-weight: normal;
}

#nohfovbgus .gt_font_bold {
  font-weight: bold;
}

#nohfovbgus .gt_font_italic {
  font-style: italic;
}

#nohfovbgus .gt_super {
  font-size: 65%;
}

#nohfovbgus .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">site_name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">installation_date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">min_count_date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">max_count_date</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Dartmouth Harbourfront Greenway</td>
<td class="gt_row gt_left">2021-07-08</td>
<td class="gt_row gt_left">2021-07-08</td>
<td class="gt_row gt_left">2022-04-25</td></tr>
    <tr><td class="gt_row gt_left">Hollis St</td>
<td class="gt_row gt_left">2020-07-08</td>
<td class="gt_row gt_left">2020-07-08</td>
<td class="gt_row gt_left">2022-04-25</td></tr>
    <tr><td class="gt_row gt_left">South Park St</td>
<td class="gt_row gt_left">2019-09-01</td>
<td class="gt_row gt_left">2019-09-01</td>
<td class="gt_row gt_left">2022-04-25</td></tr>
    <tr><td class="gt_row gt_left">Vernon St</td>
<td class="gt_row gt_left">2020-12-09</td>
<td class="gt_row gt_left">2020-12-09</td>
<td class="gt_row gt_left">2022-04-25</td></tr>
    <tr><td class="gt_row gt_left">Windsor St</td>
<td class="gt_row gt_left">2020-12-09</td>
<td class="gt_row gt_left">2020-12-09</td>
<td class="gt_row gt_left">2022-04-25</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<p>Everything is nicely aligned: the first data corresponds to the installation date, and the last data corresponds to the date the data were retrieved.</p>
<p>Plot the position of each of the counters using the given <code>latitude</code> and <code>longitude</code>, overlaid on a map of Halifax with the <code>ggmap</code> package: <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/dkahle/ggmap'>ggmap</a></span><span class='op'>)</span>
<span class='va'>site_locs</span> <span class='op'>&lt;-</span> <span class='va'>bike_data</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/distinct.html'>distinct</a></span><span class='op'>(</span><span class='va'>site_name</span>, lat <span class='op'>=</span> <span class='va'>latitude</span>, lon <span class='op'>=</span> <span class='va'>longitude</span><span class='op'>)</span>

<span class='va'>mean_lat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>site_locs</span><span class='op'>$</span><span class='va'>lat</span><span class='op'>)</span>
<span class='va'>mean_lon</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>site_locs</span><span class='op'>$</span><span class='va'>lon</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>halifax_map</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/ggmap/man/get_googlemap.html'>get_googlemap</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>mean_lon</span>, <span class='va'>mean_lat</span><span class='op'>)</span>,
                             zoom <span class='op'>=</span> <span class='fl'>14</span>, maptype <span class='op'>=</span> <span class='st'>"satellite"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/ggmap/man/ggmap.html'>ggmap</a></span><span class='op'>(</span><span class='va'>halifax_map</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>site_locs</span>, size <span class='op'>=</span> <span class='fl'>4</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>site_name</span><span class='op'>)</span>, shape <span class='op'>=</span> <span class='fl'>21</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggrepel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html'>geom_label_repel</a></span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>site_locs</span>,
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>site_name</span>, label <span class='op'>=</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_trunc.html'>str_trunc</a></span><span class='op'>(</span><span class='va'>site_name</span>, width <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span>,
    box.padding <span class='op'>=</span> <span class='fl'>1.0</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_void</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-15-1.png" width="624" /></p>
</div>
<p>For each site and channel, get the time of day from <code>count_datetime</code> to determine the frequency of collection:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>time_of_day <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/format.html'>format</a></span><span class='op'>(</span><span class='va'>count_datetime</span>, <span class='st'>"%H:%M:%S"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>site_name</span>, <span class='va'>time_of_day</span>, name <span class='op'>=</span> <span class='st'>"n_records"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>time_of_day</span>, x <span class='op'>=</span> <span class='va'>n_records</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_trunc.html'>str_trunc</a></span><span class='op'>(</span><span class='va'>site_name</span>, <span class='fl'>15</span><span class='op'>)</span>, nrow <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous</a></span><span class='op'>(</span>expand <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span>, breaks <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>500</span>, <span class='fl'>1000</span>, <span class='fl'>1500</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>dunnr</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/dunnr/man/add_facet_borders.html'>add_facet_borders</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-16-1.png" width="624" /></p>
</div>
<p>Each counter reports observations at the hour mark (+1 second). There are some slight difference in the number of records due to the time of day I retrieved the data.</p>
<p>I made an assumption that the <code>count_datetime</code> variable was in UTC timezone. I can check this assumption by looking at average counts (over the entire data set).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data_tod</span> <span class='op'>&lt;-</span> <span class='va'>bike_data</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    time_of_day <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/format.html'>format</a></span><span class='op'>(</span><span class='va'>count_datetime</span>, <span class='st'>"%H:%M:%S"</span><span class='op'>)</span>,
    <span class='co'># Create a dummy variable with arbitrary date so I can plot time of day</span>
    time_of_day <span class='op'>=</span> <span class='fu'>lubridate</span><span class='fu'>::</span><span class='fu'><a href='https://lubridate.tidyverse.org/reference/ymd_hms.html'>ymd_hms</a></span><span class='op'>(</span>
      <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"2022-04-22 "</span>, <span class='va'>time_of_day</span><span class='op'>)</span>
    <span class='op'>)</span>
  <span class='op'>)</span>
<span class='va'>bike_data_tod</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>site_name</span>, <span class='va'>time_of_day</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>
    n <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span>, mean_count <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>counter_value</span><span class='op'>)</span>,
    .groups <span class='op'>=</span> <span class='st'>"drop"</span>
  <span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>time_of_day</span>, y <span class='op'>=</span> <span class='va'>mean_count</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_ribbon.html'>geom_area</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>td_colors</span><span class='op'>$</span><span class='va'>nice</span><span class='op'>$</span><span class='va'>mellow_yellow</span>, color <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>site_name</span>, ncol <span class='op'>=</span> <span class='fl'>1</span>, scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_date.html'>scale_x_datetime</a></span><span class='op'>(</span>date_breaks <span class='op'>=</span> <span class='st'>"2 hours"</span>, date_labels <span class='op'>=</span> <span class='st'>"%H"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span>expand <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>dunnr</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/dunnr/man/add_facet_borders.html'>add_facet_borders</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-17-1.png" width="624" /></p>
</div>
<p>These peaks at around 8AM and 5PM tell me that the data is actually recorded in the local time zone (Atlantic), not UTC like I assumed. If they were in UTC time, the peaks would correspond to 11AM and 8PM locally, which would be odd times for peak cyclists.</p>
<p>Any interesting trends in different channels?</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data_tod</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'># Remove Hollis St, which does not have different channels</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>site_name</span> <span class='op'>!=</span> <span class='st'>"Hollis St"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>channel_direction <span class='op'>=</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_extract.html'>str_extract</a></span><span class='op'>(</span><span class='va'>channel_name</span>, <span class='st'>"(North|South)bound"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>site_name</span>, <span class='va'>channel_direction</span>, <span class='va'>time_of_day</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean_count <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>counter_value</span><span class='op'>)</span>, .groups <span class='op'>=</span> <span class='st'>"drop"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>time_of_day</span>, y <span class='op'>=</span> <span class='va'>mean_count</span>, color <span class='op'>=</span> <span class='va'>channel_direction</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>site_name</span>, ncol <span class='op'>=</span> <span class='fl'>1</span>, scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_date.html'>scale_x_datetime</a></span><span class='op'>(</span>date_breaks <span class='op'>=</span> <span class='st'>"2 hours"</span>, date_labels <span class='op'>=</span> <span class='st'>"%H"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"top"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-18-1.png" width="624" /></p>
</div>
<p>Vernon St and Windsor St counters have higher traffic Southbound (heading downtown) at the start of the typical workday, and higher traffic Northbound (leaving downtown) at the end of the typical workday.</p>
<p>I am less interested in counts over the course of a day or by channel, and more interested in daily counts. Now that I know the <code>count_date</code> is correctly converted with the local time, get the sum at each site and each 24 hour day:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data_daily_counts</span> <span class='op'>&lt;-</span> <span class='va'>bike_data</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>site_name</span>, <span class='va'>installation_date</span>, <span class='va'>count_date</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>
    n_records <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span>, n_bikes <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>counter_value</span><span class='op'>)</span>, .groups <span class='op'>=</span> <span class='st'>"drop"</span>
  <span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Now plot counts per day at each site:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data_daily_counts</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>count_date</span>, y <span class='op'>=</span> <span class='va'>n_bikes</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>site_name</span>, ncol <span class='op'>=</span> <span class='fl'>1</span>, scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>dunnr</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/dunnr/man/add_facet_borders.html'>add_facet_borders</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-20-1.png" width="624" /></p>
</div>
<p>The seasonal trends are very obvious from this plot. One thing that stood out to me is the big increase from 2020 to 2021 on South Park St. It may be representative of the start of the COVID pandemic, but I think it also has to do with the addition of <a href="https://www.halifax.ca/transportation/cycling-walking/expanding-network/south-park-protected-bicycle-lanes">protected bike lanes in December 2020</a>. Before 2020, there appears to be a series of 0 counts on South Park St which may be artifacts:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data_daily_counts</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>site_name</span> <span class='op'>==</span> <span class='st'>"South Park St"</span>, <span class='va'>count_date</span> <span class='op'>&lt;</span> <span class='st'>"2020-01-01"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>count_date</span>, y <span class='op'>=</span> <span class='va'>n_bikes</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-21-1.png" width="384" /></p>
</div>
<p>I’m almost certain this series of zeroes is not real, so I’ll remove it from the data. Find the date of the first non-zero <code>n_bikes</code> at this site, and filter out data before then:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>south_park_min_date</span> <span class='op'>&lt;-</span> <span class='va'>bike_data_daily_counts</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>site_name</span> <span class='op'>==</span> <span class='st'>"South Park St"</span>, <span class='va'>n_bikes</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/pull.html'>pull</a></span><span class='op'>(</span><span class='va'>count_date</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>south_park_min_date</span>
</code></pre>
</div>
<pre><code>[1] &quot;2019-11-23&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data_daily_counts</span> <span class='op'>&lt;-</span> <span class='va'>bike_data_daily_counts</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='op'>(</span><span class='op'>(</span><span class='va'>site_name</span> <span class='op'>==</span> <span class='st'>"South Park St"</span><span class='op'>)</span> <span class='op'>&amp;</span> <span class='op'>(</span><span class='va'>count_date</span> <span class='op'>&lt;</span> <span class='va'>south_park_min_date</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Overlay counts by year for each site:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data_daily_counts</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>count_year <span class='op'>=</span> <span class='fu'><a href='https://lubridate.tidyverse.org/reference/year.html'>year</a></span><span class='op'>(</span><span class='va'>count_date</span><span class='op'>)</span>,
         <span class='co'># Replace year with 1970 so I can plot on the same scale</span>
         count_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='fu'><a href='https://lubridate.tidyverse.org/reference/day.html'>yday</a></span><span class='op'>(</span><span class='va'>count_date</span><span class='op'>)</span>, origin <span class='op'>=</span> <span class='st'>"1970-01-01"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>count_date</span>, y <span class='op'>=</span> <span class='va'>n_bikes</span>, color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>count_year</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>1</span>, alpha <span class='op'>=</span> <span class='fl'>0.8</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>site_name</span>, ncol <span class='op'>=</span> <span class='fl'>1</span>, scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_date.html'>scale_x_date</a></span><span class='op'>(</span>date_labels <span class='op'>=</span> <span class='st'>"%B"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>dunnr</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/dunnr/man/add_facet_borders.html'>add_facet_borders</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"bottom"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='cn'>NULL</span>, color <span class='op'>=</span> <span class='st'>"Year"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_brewer.html'>scale_color_brewer</a></span><span class='op'>(</span>palette <span class='op'>=</span> <span class='st'>"Set1"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-23-1.png" width="624" /></p>
</div>
<p>I’m interested in day of the week effects as well:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_data_daily_counts</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>day_of_week <span class='op'>=</span> <span class='fu'><a href='https://lubridate.tidyverse.org/reference/day.html'>wday</a></span><span class='op'>(</span><span class='va'>count_date</span>, label <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>day_of_week</span>, x <span class='op'>=</span> <span class='va'>n_bikes</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-24-1.png" width="480" /></p>
</div>
<p>Less activity on the weekends.</p>
<h2 id="getting-weather-data">Getting weather data</h2>
<p>Temporal data are probably the most important predictors of ridership, but I’m sure a close second is the day’s weather. I’ll get this with <a href="https://api.weather.gc.ca/">the API provided by the Meteorological Service of Canada</a>. I can get a list of available data sets (which they call collections) as follows: <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>base_url</span> <span class='op'>&lt;-</span> <span class='st'>"https://api.weather.gc.ca/"</span>
<span class='va'>resp</span> <span class='op'>&lt;-</span> <span class='fu'>httr</span><span class='fu'>::</span><span class='fu'><a href='https://httr.r-lib.org/reference/GET.html'>GET</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>base_url</span>, <span class='st'>"collections?f=json"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>content_parsed</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://httr.r-lib.org/reference/content.html'>content</a></span><span class='op'>(</span><span class='va'>resp</span>, as <span class='op'>=</span> <span class='st'>"parsed"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>content_parsed</span>, max.level <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>List of 2
 $ collections:List of 70
 $ links      :List of 3</code></pre>
</div>
<p>The first element of <code>collections</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>collections</span> <span class='op'>&lt;-</span> <span class='va'>content_parsed</span><span class='op'>$</span><span class='va'>collections</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>collections</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>, max.level <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>List of 7
 $ id         : chr &quot;hydrometric-stations&quot;
 $ title      : chr &quot;Hydrometric Monitoring Stations&quot;
 $ description: chr &quot;A station is a site on a river or lake where water quantity (water level and flow) are collected and recorded.&quot;
 $ keywords   :List of 2
  ..$ : chr &quot;station&quot;
  ..$ : chr &quot;hydrometric station&quot;
 $ links      :List of 13
  ..$ :List of 5
  ..$ :List of 5
  ..$ :List of 5
  ..$ :List of 5
  ..$ :List of 5
  ..$ :List of 4
  ..$ :List of 4
  ..$ :List of 4
  ..$ :List of 4
  ..$ :List of 4
  ..$ :List of 4
  ..$ :List of 4
  ..$ :List of 4
 $ extent     :List of 2
  ..$ spatial :List of 2
  ..$ temporal:List of 1
 $ itemType   : chr &quot;feature&quot;</code></pre>
</div>
<p>Unlike the bicycle counts data, this nested format doesn’t lend itself well to direct conversion to a <code>tibble</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span><span class='op'>(</span><span class='va'>collections</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Error:
! Tibble columns must have compatible sizes.
* Size 2: Columns `keywords` and `extent`.
* Size 13: Column `links`.
i Only values of size one are recycled.</code></pre>
</div>
<p>Instead, I can use <code>enframe()</code> to get a two-column data frame:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://tibble.tidyverse.org/reference/enframe.html'>enframe</a></span><span class='op'>(</span><span class='va'>collections</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 7 x 2
  name        value           
  &lt;chr&gt;       &lt;list&gt;          
1 id          &lt;chr [1]&gt;       
2 title       &lt;chr [1]&gt;       
3 description &lt;chr [1]&gt;       
4 keywords    &lt;list [2]&gt;      
5 links       &lt;list [13]&gt;     
6 extent      &lt;named list [2]&gt;
7 itemType    &lt;chr [1]&gt;       </code></pre>
</div>
<p>Assuming every item in the <code>collections</code> list has the same structure, I’ll just extract the <code>id</code>, <code>title</code>, and <code>description</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>collections_df</span> <span class='op'>&lt;-</span>  <span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_dfr</a></span><span class='op'>(</span>
  <span class='va'>collections</span>,
  <span class='op'>~</span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/enframe.html'>enframe</a></span><span class='op'>(</span><span class='va'>.x</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>name</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"id"</span>, <span class='st'>"title"</span>, <span class='st'>"description"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
    <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_wider.html'>pivot_wider</a></span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='va'>name</span>, values_from <span class='op'>=</span> <span class='va'>value</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'><a href='https://gt.rstudio.com/reference/gt.html'>gt</a></span><span class='op'>(</span><span class='va'>collections_df</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://gt.rstudio.com/reference/tab_options.html'>tab_options</a></span><span class='op'>(</span>container.height <span class='op'>=</span> <span class='fl'>300</span>, container.overflow.y <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<div id="etgmmvqhuq" style="overflow-x:auto;overflow-y:auto;width:auto;height:300px;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#etgmmvqhuq .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#etgmmvqhuq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#etgmmvqhuq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#etgmmvqhuq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#etgmmvqhuq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#etgmmvqhuq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#etgmmvqhuq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#etgmmvqhuq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#etgmmvqhuq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#etgmmvqhuq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#etgmmvqhuq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#etgmmvqhuq .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#etgmmvqhuq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#etgmmvqhuq .gt_from_md > :first-child {
  margin-top: 0;
}

#etgmmvqhuq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#etgmmvqhuq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#etgmmvqhuq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#etgmmvqhuq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#etgmmvqhuq .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#etgmmvqhuq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#etgmmvqhuq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#etgmmvqhuq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#etgmmvqhuq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#etgmmvqhuq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#etgmmvqhuq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#etgmmvqhuq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#etgmmvqhuq .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#etgmmvqhuq .gt_left {
  text-align: left;
}

#etgmmvqhuq .gt_center {
  text-align: center;
}

#etgmmvqhuq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#etgmmvqhuq .gt_font_normal {
  font-weight: normal;
}

#etgmmvqhuq .gt_font_bold {
  font-weight: bold;
}

#etgmmvqhuq .gt_font_italic {
  font-style: italic;
}

#etgmmvqhuq .gt_super {
  font-size: 65%;
}

#etgmmvqhuq .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">title</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">description</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_center">hydrometric-stations</td>
<td class="gt_row gt_center">Hydrometric Monitoring Stations</td>
<td class="gt_row gt_center">A station is a site on a river or lake where water quantity (water level and flow) are collected and recorded.</td></tr>
    <tr><td class="gt_row gt_center">hydrometric-daily-mean</td>
<td class="gt_row gt_center">Daily Mean of Water Level or Flow</td>
<td class="gt_row gt_center">The daily mean is the average of all unit values for a given day.</td></tr>
    <tr><td class="gt_row gt_center">hydrometric-monthly-mean</td>
<td class="gt_row gt_center">Monthly Mean of Water Level or Flow</td>
<td class="gt_row gt_center">The monthly mean is the average of daily mean values for a given month.</td></tr>
    <tr><td class="gt_row gt_center">hydrometric-annual-statistics</td>
<td class="gt_row gt_center">Annual Maximum and Minimum Daily Water Level or Flow</td>
<td class="gt_row gt_center">The annual maximum and minimum daily data are the maximum and minimum daily mean values for a given year.</td></tr>
    <tr><td class="gt_row gt_center">hydrometric-annual-peaks</td>
<td class="gt_row gt_center">Annual Maximum and Minimum Instantaneous Water Level or Flow</td>
<td class="gt_row gt_center">The annual maximum and minimum instantaneous data are the maximum and minimum instantaneous values for a given year.</td></tr>
    <tr><td class="gt_row gt_center">hydrometric-realtime</td>
<td class="gt_row gt_center">Real-time hydrometric data</td>
<td class="gt_row gt_center">Real-time water level and flow (discharge) data collected at over 2100 hydrometric stations across Canada (last 30 days).</td></tr>
    <tr><td class="gt_row gt_center">climate-normals</td>
<td class="gt_row gt_center">1981-2010 Climate Normals</td>
<td class="gt_row gt_center">Climate Normals are used to summarize or describe the average climatic conditions of a particular location. At the completion of each decade, Environment and Climate Change Canada updates its climate normals for as many locations and as many climatic characteristics as possible. The climate normals offered here are based on Canadian climate stations with at least 15 years of data between 1981 to 2010.</td></tr>
    <tr><td class="gt_row gt_center">climate-stations</td>
<td class="gt_row gt_center">Climate Stations</td>
<td class="gt_row gt_center">Climate observations are derived from two sources of data. The first are Daily Climate Stations producing one or two observations per day of temperature, precipitation. The second are hourly stations that typically produce more weather elements e.g. wind or snow on ground.</td></tr>
    <tr><td class="gt_row gt_center">climate-monthly</td>
<td class="gt_row gt_center">Monthly Climate Observation Summaries</td>
<td class="gt_row gt_center">A cross-country summary of the averages and extremes for the month, including precipitation totals, max-min temperatures, and degree days. This data is available from stations that produce daily data.</td></tr>
    <tr><td class="gt_row gt_center">climate-daily</td>
<td class="gt_row gt_center">Daily Climate Observations</td>
<td class="gt_row gt_center">Daily climate observations are derived from two sources of data. The first are Daily Climate Stations producing one or two observations per day of temperature, precipitation. The second are hourly stations that typically produce more weather elements e.g. wind or snow on ground. Only a subset of the total stations is shown due to size limitations. The criteria for station selection are listed as below. The priorities for inclusion are as follows: (1) Station is currently operational, (2) Stations with long periods of record, (3) Stations that are co-located with the categories above and supplement the period of record</td></tr>
    <tr><td class="gt_row gt_center">climate-hourly</td>
<td class="gt_row gt_center">Hourly Climate Observations</td>
<td class="gt_row gt_center">Hourly climate observations are derived from the data source HLY01. These are stations that produce hourly meteorological observations, taken each hour of the day for the hours 00h-23h, for both daily (temperature, precipitation) and non-daily elements (station pressure, relative humidity, visibility). Only a subset of the total stations are shown due to size limitations. The stations were selected based on the following criteria: (1) Stations near cities with populations greater than 10,000, (2) Stations with long periods of record of at least 30 years of data, (3) Stations selected for the 1991-2020 WMO Normals, (4) Stations with RBCN designation not selected for 1991-2020 WMO Normals, and/or (5) Stations whose sum when joined with co-located/successor stations equates to a period of record of 30 years or greater.</td></tr>
    <tr><td class="gt_row gt_center">ahccd-stations</td>
<td class="gt_row gt_center">Adjusted and Homogenized Canadian Climate Data (AHCCD) Stations</td>
<td class="gt_row gt_center">Climate station datasets that incorporate adjustments (derived from statistical procedures) to the original historical station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation.</td></tr>
    <tr><td class="gt_row gt_center">ahccd-annual</td>
<td class="gt_row gt_center">Adjusted and Homogenized Canadian Climate Data (AHCCD) Annual</td>
<td class="gt_row gt_center">Adjusted and Homogenized Canadian Climate Data (AHCCD) are climate station datasets that incorporate adjustments (derived from statistical procedures) to the original historical station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation. Data are provided for temperature, precipitation, pressure and wind speed. Station trend data are provided when available. Trends are calculated using the Theil-Sen method using the station's full period of available data. The availability of trends will vary by station; if more than 5 consecutive years are missing data or more than 10% of the data within the time series is missing, a trend was not calculated.</td></tr>
    <tr><td class="gt_row gt_center">ahccd-seasonal</td>
<td class="gt_row gt_center">Adjusted and Homogenized Canadian Climate Data (AHCCD) Seasonal</td>
<td class="gt_row gt_center">Adjusted and Homogenized Canadian Climate Data (AHCCD) are climate station datasets that incorporate adjustments (derived from statistical procedures) to the original historical station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation. Data are provided for temperature, precipitation, pressure and wind speed. Station trend data are provided when available. Trends are calculated using the Theil-Sen method using the station's full period of available data. The availability of trends will vary by station; if more than 5 consecutive years are missing data or more than 10% of the data within the time series is missing, a trend was not calculated.</td></tr>
    <tr><td class="gt_row gt_center">ahccd-monthly</td>
<td class="gt_row gt_center">Adjusted and Homogenized Canadian Climate Data (AHCCD) Monthly</td>
<td class="gt_row gt_center">Adjusted and Homogenized Canadian Climate Data (AHCCD) are climate station datasets that incorporate adjustments (derived from statistical procedures) to the original historical station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation. Data are provided for temperature, precipitation, pressure and wind speed. Station trend data are provided when available. Trends are calculated using the Theil-Sen method using the station's full period of available data. The availability of trends will vary by station; if more than 5 consecutive years are missing data or more than 10% of the data within the time series is missing, a trend was not calculated.</td></tr>
    <tr><td class="gt_row gt_center">ahccd-trends</td>
<td class="gt_row gt_center">Adjusted and Homogenized Canadian Climate Data (AHCCD) Trends</td>
<td class="gt_row gt_center">Adjusted and Homogenized Canadian Climate Data (AHCCD) are climate station datasets that incorporate adjustments (derived from statistical procedures) to the original historical station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation. Data are provided for temperature, precipitation, pressure and wind speed. Station trend data are provided when available. Trends are calculated using the Theil-Sen method using the station's full period of available data. The availability of trends will vary by station; if more than 5 consecutive years are missing data or more than 10% of the data within the time series is missing, a trend was not calculated.</td></tr>
    <tr><td class="gt_row gt_center">swob-realtime</td>
<td class="gt_row gt_center">Surface Weather Observations</td>
<td class="gt_row gt_center">Surface Observations measured at the automatic and manual stations of the Environment and Climate Change Canada and partners networks, either for a single station, or for the stations of specific provinces and territories (last 30 days)</td></tr>
    <tr><td class="gt_row gt_center">ltce-stations</td>
<td class="gt_row gt_center">Virtual Climate Stations (LTCE)</td>
<td class="gt_row gt_center">A Virtual Climate station is the result of threading together climate data from proximate current and historical stations to construct a long term threaded data set. For the purpose of identifying and tabulating daily extremes of record for temperature, precipitation and snowfall, the Meteorological Service of Canada has threaded or put together data from closely related stations to compile a long time series of data for about 750 locations in Canada to monitor for record-breaking weather. The length of the time series of virtual stations is often greater than 100 years. A Virtual Climate station is always named for an “Area” rather than a point, e.g. Winnipeg Area, to indicate that the data are drawn from that area(within a 20km radius from the urban center) rather than a single precise location.</td></tr>
    <tr><td class="gt_row gt_center">ltce-temperature</td>
<td class="gt_row gt_center">Daily Extremes of Records (LTCE) – Temperature</td>
<td class="gt_row gt_center">Anomalous weather resulting in Temperature and Precipitation extremes occurs almost every day somewhere in Canada. For the purpose of identifying and tabulating daily extremes of record for temperature, precipitation and snowfall, the Meteorological Service of Canada has threaded or put together data from closely related stations to compile a long time series of data for about 750 locations in Canada to monitor for record-breaking weather. Virtual Climate stations correspond with the city pages of weather.gc.ca. This data provides the daily extremes of record for Temperature for each day of the year. Daily elements include: High Maximum, Low Maximum, High Minimum, Low Minimum.</td></tr>
    <tr><td class="gt_row gt_center">ltce-precipitation</td>
<td class="gt_row gt_center">Daily Extremes of Records (LTCE) – Precipitation</td>
<td class="gt_row gt_center">Anomalous weather resulting in Temperature and Precipitation extremes occurs almost every day somewhere in Canada. For the purpose of identifying and tabulating daily extremes of record for temperature, precipitation and snowfall, the Meteorological Service of Canada has threaded or put together data from closely related stations to compile a long time series of data for about 750 locations in Canada to monitor for record-breaking weather. Virtual Climate stations correspond with the city pages of weather.gc.ca. This data provides the daily extremes of record for Precipitation for each day of the year. Daily elements include: Greatest Precipitation.</td></tr>
    <tr><td class="gt_row gt_center">ltce-snowfall</td>
<td class="gt_row gt_center">Daily Extremes of Records (LTCE) – Snowfall</td>
<td class="gt_row gt_center">Anomalous weather resulting in Temperature and Precipitation extremes occurs almost every day somewhere in Canada. For the purpose of identifying and tabulating daily extremes of record for temperature, precipitation and snowfall, the Meteorological Service of Canada has threaded or put together data from closely related stations to compile a long time series of data for about 750 locations in Canada to monitor for record-breaking weather. Virtual Climate stations correspond with the city pages of weather.gc.ca. This data provides the daily extremes of record for Snowfall for each day of the year. Daily elements include: Greatest Snowfall.</td></tr>
    <tr><td class="gt_row gt_center">aqhi-forecasts-realtime</td>
<td class="gt_row gt_center">Air Quality Health Index – Forecasts</td>
<td class="gt_row gt_center">The Air Quality Health Index (AQHI) is a scale designed to help quantify the quality of the air in a certain region on a scale from 1 to 10. When the amount of air pollution is very high, the number is reported as 10+. It also includes a category that describes the health risk associated with the index reading (e.g. Low, Moderate, High, or Very High Health Risk). The AQHI is calculated based on the relative risks of a combination of common air pollutants that are known to harm human health, including ground-level ozone, particulate matter, and nitrogen dioxide. The AQHI formulation captures only the short term or acute health risk (exposure of hour or days at a maximum). The formulation of the AQHI may change over time to reflect new understanding associated with air pollution health effects. The AQHI is calculated from data observed in real time, without being verified (quality control).</td></tr>
    <tr><td class="gt_row gt_center">aqhi-observations-realtime</td>
<td class="gt_row gt_center">Air Quality Health Index – Observations</td>
<td class="gt_row gt_center">The Air Quality Health Index (AQHI) is a scale designed to help quantify the quality of the air in a certain region on a scale from 1 to 10. When the amount of air pollution is very high, the number is reported as 10+. It also includes a category that describes the health risk associated with the index reading (e.g. Low, Moderate, High, or Very High Health Risk). The AQHI is calculated based on the relative risks of a combination of common air pollutants that are known to harm human health, including ground-level ozone, particulate matter, and nitrogen dioxide. The AQHI formulation captures only the short term or acute health risk (exposure of hour or days at a maximum). The formulation of the AQHI may change over time to reflect new understanding associated with air pollution health effects. The AQHI is calculated from data observed in real time, without being verified (quality control).</td></tr>
    <tr><td class="gt_row gt_center">bulletins-realtime</td>
<td class="gt_row gt_center">Real-time meteorological bulletins</td>
<td class="gt_row gt_center">Real-time meteorological bulletins (last 140 days)</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:projected:annual:anomaly</td>
<td class="gt_row gt_center">Projected annual anomaly CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:projected:seasonal:anomaly</td>
<td class="gt_row gt_center">Projected seasonal anomaly CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:projected:monthly:anomaly</td>
<td class="gt_row gt_center">Projected monthly anomaly CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:projected:annual:absolute</td>
<td class="gt_row gt_center">Projected annual CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:projected:seasonal:absolute</td>
<td class="gt_row gt_center">Projected seasonal CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:projected:monthly:absolute</td>
<td class="gt_row gt_center">Projected monthly CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:projected:annual:P20Y-Avg</td>
<td class="gt_row gt_center">Projected annual anomaly for 20 years average CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:projected:seasonal:P20Y-Avg</td>
<td class="gt_row gt_center">Projected seasonal anomaly for 20 years average CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:historical:annual:absolute</td>
<td class="gt_row gt_center">Historical annual CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:historical:annual:anomaly</td>
<td class="gt_row gt_center">Historical annual anomaly CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:historical:seasonal:absolute</td>
<td class="gt_row gt_center">Historical seasonal CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:historical:seasonal:anomaly</td>
<td class="gt_row gt_center">Historical seasonal anomaly CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:historical:monthly:absolute</td>
<td class="gt_row gt_center">Historical monthly CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:cmip5:historical:monthly:anomaly</td>
<td class="gt_row gt_center">Historical monthly anomaly CMIP5</td>
<td class="gt_row gt_center">The Global climate model scenarios dataset is based on an ensemble of global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). Multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios at a 1x1 degree grid resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. A range of percentiles across the multi-model ensembles are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:projected:annual:anomaly</td>
<td class="gt_row gt_center">Projected annual anomaly DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:projected:seasonal:anomaly</td>
<td class="gt_row gt_center">Projected seasonal anomaly DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:projected:annual:absolute</td>
<td class="gt_row gt_center">Projected annual DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:projected:seasonal:absolute</td>
<td class="gt_row gt_center">Projected seasonal DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:projected:monthly:absolute</td>
<td class="gt_row gt_center">Projected monthly DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:projected:annual:P20Y-Avg</td>
<td class="gt_row gt_center">Projected annual anomaly for 20 years average DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:projected:seasonal:P20Y-Avg</td>
<td class="gt_row gt_center">Projected seasonal anomaly for 20 years average DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:historical:annual:absolute</td>
<td class="gt_row gt_center">Historical annual DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:historical:annual:anomaly</td>
<td class="gt_row gt_center">Historical annual anomaly DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:historical:seasonal:absolute</td>
<td class="gt_row gt_center">Historical seasonal DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:historical:seasonal:anomaly</td>
<td class="gt_row gt_center">Historical seasonal anomaly DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:dcs:historical:monthly:absolute</td>
<td class="gt_row gt_center">Historical monthly DCS</td>
<td class="gt_row gt_center">The statistically downscaled climate scenarios dataset provides multi-model ensembles of modelled output (actual value) and projected change (anomaly) are available for historical simulations and three emission scenarios, RCP2.6, RCP4.5, RCP8.5, at a 10km resolution. Projected changes are expressed as anomalies with respect to the reference period of 1986-2005. Downscaled data are based on global climate model projections from the Coupled Model Intercomparison Project Phase 5 (CMIP5). A range of percentiles across the multi-model ensemble are available for download.</td></tr>
    <tr><td class="gt_row gt_center">climate:indices:historical</td>
<td class="gt_row gt_center">Historical indices</td>
<td class="gt_row gt_center">High-resolution statistically downscaled climate indices relevant to climate change impacts in Canada are available at a 10 km spatial resolution and an annual temporal resolution for 1951-2100. The climate indices are based on model projections from 24 global climate models (GCMs) that participated in the Coupled Model Intercomparison Project Phase 5 (CMIP5).</td></tr>
    <tr><td class="gt_row gt_center">climate:indices:projected</td>
<td class="gt_row gt_center">Projected indices</td>
<td class="gt_row gt_center">High-resolution statistically downscaled climate indices relevant to climate change impacts in Canada are available at a 10 km spatial resolution and an annual temporal resolution for 1951-2100. The climate indices are based on model projections from 24 global climate models (GCMs) that participated in the Coupled Model Intercomparison Project Phase 5 (CMIP5).</td></tr>
    <tr><td class="gt_row gt_center">climate:spei-1:historical</td>
<td class="gt_row gt_center">Historical SPEI-1</td>
<td class="gt_row gt_center">The Standardized Precipitation Evapotranspiration Index (SPEI) is computed similarly to the SPI. The main difference is that SPI assesses precipitation variance, while SPEI also considers demand from evapotranspiration which is subtracted from any precipitation accumulation prior to assessment. Unlike the SPI, the SPEI captures the main impact of increased temperatures on water demand.</td></tr>
    <tr><td class="gt_row gt_center">climate:spei-3:historical</td>
<td class="gt_row gt_center">Historical SPEI-3</td>
<td class="gt_row gt_center">The Standardized Precipitation Evapotranspiration Index (SPEI) is computed similarly to the SPI. The main difference is that SPI assesses precipitation variance, while SPEI also considers demand from evapotranspiration which is subtracted from any precipitation accumulation prior to assessment. Unlike the SPI, the SPEI captures the main impact of increased temperatures on water demand.</td></tr>
    <tr><td class="gt_row gt_center">climate:spei-12:historical</td>
<td class="gt_row gt_center">Historical SPEI-12</td>
<td class="gt_row gt_center">The Standardized Precipitation Evapotranspiration Index (SPEI) is computed similarly to the SPI. The main difference is that SPI assesses precipitation variance, while SPEI also considers demand from evapotranspiration which is subtracted from any precipitation accumulation prior to assessment. Unlike the SPI, the SPEI captures the main impact of increased temperatures on water demand.</td></tr>
    <tr><td class="gt_row gt_center">climate:spei-1:projected</td>
<td class="gt_row gt_center">Projected SPEI-1</td>
<td class="gt_row gt_center">The Standardized Precipitation Evapotranspiration Index (SPEI) is computed similarly to the SPI. The main difference is that SPI assesses precipitation variance, while SPEI also considers demand from evapotranspiration which is subtracted from any precipitation accumulation prior to assessment. Unlike the SPI, the SPEI captures the main impact of increased temperatures on water demand.</td></tr>
    <tr><td class="gt_row gt_center">climate:spei-3:projected</td>
<td class="gt_row gt_center">Projected SPEI-3</td>
<td class="gt_row gt_center">The Standardized Precipitation Evapotranspiration Index (SPEI) is computed similarly to the SPI. The main difference is that SPI assesses precipitation variance, while SPEI also considers demand from evapotranspiration which is subtracted from any precipitation accumulation prior to assessment. Unlike the SPI, the SPEI captures the main impact of increased temperatures on water demand.</td></tr>
    <tr><td class="gt_row gt_center">climate:spei-12:projected</td>
<td class="gt_row gt_center">Projected SPEI-12</td>
<td class="gt_row gt_center">The Standardized Precipitation Evapotranspiration Index (SPEI) is computed similarly to the SPI. The main difference is that SPI assesses precipitation variance, while SPEI also considers demand from evapotranspiration which is subtracted from any precipitation accumulation prior to assessment. Unlike the SPI, the SPEI captures the main impact of increased temperatures on water demand.</td></tr>
    <tr><td class="gt_row gt_center">climate:cangrd:historical:annual:trend</td>
<td class="gt_row gt_center">CanGRD historical annual trend</td>
<td class="gt_row gt_center">CANGRD data are interpolated from adjusted and homogenized climate station data (i.e., AHCCD datasets). Homogenized climate data incorporate adjustments to the original station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation. Annual trends of relative total precipitation change (%) for 1948-2012 based on Canadian gridded data (CANGRD) are available, at a 50km resolution across Canada. The relative trends reflect the percent change in total precipitation over a period from the baseline value (defined as the average over 1961-1990 as the reference period). Annual trends of mean surface air temperature change (degrees Celsius) for 1948-2016 based on Canadian gridded data (CANGRD) are available at a 50km resolution across Canada. Temperature trends represent the departure from a mean reference period (1961-1990).</td></tr>
    <tr><td class="gt_row gt_center">climate:cangrd:historical:annual:anomaly</td>
<td class="gt_row gt_center">CanGRD historical annual anomaly</td>
<td class="gt_row gt_center">Gridded annual mean temperature anomalies derived from daily minimum, maximum and mean surface air temperatures (degrees Celsius) and anomalies derived from daily total precipitation is available at a 50km resolution across Canada. The Canadian gridded data (CANGRD) are interpolated from homogenized temperature (i.e., AHCCD datasets). Homogenized temperatures incorporate adjustments to the original station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation. The anomalies are the difference between the temperature for a given year or season and a baseline value (defined as the average over 1961-1990 as the reference period). The yearly and seasonal temperature anomalies were computed for the years 1948 to 2017. The data will continue to be updated every year. For precipitation, the Canadian gridded data (CANGRD) are interpolated from adjusted precipitation (i.e., AHCCD datasets). Adjusted precipitation data incorporate adjustments to the original station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation. The anomalies are the percentage difference between the value for a given year or season and a baseline value (defined as the average over 1961-1990 as the reference period). The yearly and seasonal relative precipitation anomalies were computed for the years 1948 to 2014. The data will be updated as time permits.</td></tr>
    <tr><td class="gt_row gt_center">climate:cangrd:historical:monthly:anomaly</td>
<td class="gt_row gt_center">CanGRD historical monthly anomaly</td>
<td class="gt_row gt_center">Gridded monthly mean temperature anomalies derived from daily minimum, maximum and mean surface air temperatures (degrees Celsius) and anomalies derived from daily total precipitation is available at a 50km resolution across Canada. The Canadian gridded data (CANGRD) are interpolated from homogenized temperature (i.e., AHCCD datasets). Homogenized temperatures incorporate adjustments to the original station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation. The anomalies are the difference between the temperature for a given year or season and a baseline value (defined as the average over 1961-1990 as the reference period). The yearly and seasonal temperature anomalies were computed for the years 1948 to 2017. The data will continue to be updated every year. For precipitation, the Canadian gridded data (CANGRD) are interpolated from adjusted precipitation (i.e., AHCCD datasets). Adjusted precipitation data incorporate adjustments to the original station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation. The anomalies are the percentage difference between the value for a given year or season and a baseline value (defined as the average over 1961-1990 as the reference period). The yearly and seasonal relative precipitation anomalies were computed for the years 1948 to 2014. The data will be updated as time permits.</td></tr>
    <tr><td class="gt_row gt_center">climate:cangrd:historical:seasonal:trend</td>
<td class="gt_row gt_center">CanGRD historical seasonal trend</td>
<td class="gt_row gt_center">CANGRD data are interpolated from adjusted and homogenized climate station data (i.e., AHCCD datasets). Homogenized climate data incorporate adjustments to the original station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation.Seasonal trends of relative total precipitation change (%) for 1948-2012 based on Canadian gridded data (CANGRD) are available, at a 50km resolution across Canada. The relative trends reflect the percent change in total precipitation over a period from the baseline value (defined as the average over 1961-1990 as the reference period). Seasonal trends of mean surface air temperature change (degrees Celsius) for 1948-2016 based on Canadian gridded data (CANGRD) are available at a 50km resolution across Canada. Temperature trends represent the departure from a mean reference period (1961-1990).</td></tr>
    <tr><td class="gt_row gt_center">climate:cangrd:historical:seasonal:anomaly</td>
<td class="gt_row gt_center">CanGRD historical seasonal anomaly</td>
<td class="gt_row gt_center">Gridded seasonal mean temperature anomalies derived from daily minimum, maximum and mean surface air temperatures (degrees Celsius) and anomalies derived from daily total precipitation is available at a 50km resolution across Canada. The Canadian gridded data (CANGRD) are interpolated from homogenized temperature (i.e., AHCCD datasets). Homogenized temperatures incorporate adjustments to the original station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation. The anomalies are the difference between the temperature for a given year or season and a baseline value (defined as the average over 1961-1990 as the reference period). The yearly and seasonal temperature anomalies were computed for the years 1948 to 2017. The data will continue to be updated every year. For precipitation, the Canadian gridded data (CANGRD) are interpolated from adjusted precipitation (i.e., AHCCD datasets). Adjusted precipitation data incorporate adjustments to the original station data to account for discontinuities from non-climatic factors, such as instrument changes or station relocation. The anomalies are the percentage difference between the value for a given year or season and a baseline value (defined as the average over 1961-1990 as the reference period). The yearly and seasonal relative precipitation anomalies were computed for the years 1948 to 2014. The data will be updated as time permits.</td></tr>
    <tr><td class="gt_row gt_center">weather:rdpa:15km:24f</td>
<td class="gt_row gt_center">Regional Deterministic Precipitation Analysis (RDPA) 24 hours accumulation at 15km</td>
<td class="gt_row gt_center">The Regional Deterministic Precipitation Analysis (RDPA) produces a best estimate of the amount of precipitation that occurred over recent past periods of 24 hours. The estimate integrates data from in situ precipitation gauge measurements, weather radar and numerical weather prediction models. Geographic coverage is North America (Canada, United States and Mexico). Data is available at horizontal resolution of 15 km. Data is only available for the surface level. Analysis data is made available once a day for the 24h intervals. A preliminary estimate is available approximately 1h after the end of the accumulation period, and revised 6h after in order to assimilate gauge data arriving later.</td></tr>
    <tr><td class="gt_row gt_center">weather:rdpa:15km:6f</td>
<td class="gt_row gt_center">Regional Deterministic Precipitation Analysis (RDPA) 6 hours accumulation at 15 km</td>
<td class="gt_row gt_center">The Regional Deterministic Precipitation Analysis (RDPA) produces a best estimate of the amount of precipitation that occurred over recent past periods of 6 hours. The estimate integrates data from in situ precipitation gauge measurements, weather radar and numerical weather prediction models. Geographic coverage is North America (Canada, United States and Mexico). Data is available at horizontal resolution of 15 km. Data is only available for the surface level. Analysis data is made available four times a day for the 6h intervals. A preliminary estimate is available approximately 1h after the end of the accumulation period, and revised 6h after in order to assimilate gauge data arriving later.</td></tr>
    <tr><td class="gt_row gt_center">weather:rdpa:10km:24f</td>
<td class="gt_row gt_center">Regional Deterministic Precipitation Analysis (RDPA) 24 hours accumulation</td>
<td class="gt_row gt_center">The Regional Deterministic Precipitation Analysis (RDPA) produces a best estimate of the amount of precipitation that occurred over recent past periods of 24 hours. The estimate integrates data from in situ precipitation gauge measurements, weather radar and numerical weather prediction models. Geographic coverage is North America (Canada, United States and Mexico). Data is available at horizontal resolution of 10 km. Data is only available for the surface level. Analysis data is made available once a day for the 24h intervals. A preliminary estimate is available approximately 1h after the end of the accumulation period, and revised 6h after in order to assimilate gauge data arriving later.</td></tr>
    <tr><td class="gt_row gt_center">weather:rdpa:10km:6f</td>
<td class="gt_row gt_center">Regional Deterministic Precipitation Analysis (RDPA) 6 hours accumulation</td>
<td class="gt_row gt_center">The Regional Deterministic Precipitation Analysis (RDPA) produces a best estimate of the amount of precipitation that occurred over recent past periods of 6 hours. The estimate integrates data from in situ precipitation gauge measurements, weather radar and numerical weather prediction models. Geographic coverage is North America (Canada, United States and Mexico). Data is available at horizontal resolution of 10 km. Data is only available for the surface level. Analysis data is made available four times a day for the 6h intervals. A preliminary estimate is available approximately 1h after the end of the accumulation period, and revised 6h after in order to assimilate gauge data arriving later.</td></tr>
    <tr><td class="gt_row gt_center">weather:rdpa:10km:24p</td>
<td class="gt_row gt_center">Regional Deterministic Precipitation Analysis (RDPA) 24 hours accumulation (preliminary)</td>
<td class="gt_row gt_center">The Regional Deterministic Precipitation Analysis (RDPA) produces a best estimate of the amount of precipitation that occurred over recent past periods of 24 hours. The estimate integrates data from in situ precipitation gauge measurements, weather radar and numerical weather prediction models. Geographic coverage is North America (Canada, United States and Mexico). Data is available at horizontal resolution of 10 km. Data is only available for the surface level. Analysis data is made available once a day for the 24h intervals. The preliminary estimate is available approximately 1h after the end of the accumulation period.</td></tr>
    <tr><td class="gt_row gt_center">weather:rdpa:10km:6p</td>
<td class="gt_row gt_center">Regional Deterministic Precipitation Analysis (RDPA) 6 hours accumulation (preliminary)</td>
<td class="gt_row gt_center">The Regional Deterministic Precipitation Analysis (RDPA) produces a best estimate of the amount of precipitation that occurred over recent past periods of 6 hours. The estimate integrates data from in situ precipitation gauge measurements, weather radar and numerical weather prediction models. Geographic coverage is North America (Canada, United States and Mexico). Data is available at horizontal resolution of 10 km. Data is only available for the surface level. Analysis data is made available four times a day for 6h intervals. The preliminary estimate is available approximately 1h after the end of the accumulation period.</td></tr>
    <tr><td class="gt_row gt_center">weather:cansips:250km:forecast:members</td>
<td class="gt_row gt_center">Canadian Seasonal to Inter-annual Prediction System</td>
<td class="gt_row gt_center">The Canadian Seasonal to Inter-annual Prediction System (CanSIPS) carries out physics calculations to arrive at probabilistic predictions of atmospheric elements from the beginning of a month out to up to 12 months into the future. Atmospheric elements include temperature, precipitation, wind speed and direction and others. This product contains raw numerical results of these calculations. Geographical coverage is global. Data is available on a grid at a horizontal resolution of 2.5 degrees and for a few selected vertical levels. Predictions and corresponding hindcast are made available monthly.</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<p>The collections I want for this project are <code>climate-stations</code> (to find the appropriate Halifax station) and <code>climate-daily</code> to get daily measurements at that station. Get <code>climate-stations</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>resp</span> <span class='op'>&lt;-</span> <span class='fu'>httr</span><span class='fu'>::</span><span class='fu'><a href='https://httr.r-lib.org/reference/GET.html'>GET</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>base_url</span>, <span class='st'>"collections/climate-stations/items?f=json"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>content_parsed</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://httr.r-lib.org/reference/content.html'>content</a></span><span class='op'>(</span><span class='va'>resp</span>, as <span class='op'>=</span> <span class='st'>"parsed"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>content_parsed</span>, max.level <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>List of 6
 $ type          : chr &quot;FeatureCollection&quot;
 $ features      :List of 500
 $ numberMatched : int 8552
 $ numberReturned: int 500
 $ links         :List of 5
 $ timeStamp     : chr &quot;2022-04-27T03:27:26.475648Z&quot;</code></pre>
</div>
<p>Before looking closer at the data, I can already tell I’ll want to increase the limit of returned entries. From the API documentation, the maximum number is 10000, so I can get all 8552 records in one API call:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>resp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://httr.r-lib.org/reference/GET.html'>GET</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>base_url</span>,
                   <span class='st'>"collections/climate-stations/items?f=json&amp;limit=10000"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>content_parsed</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://httr.r-lib.org/reference/content.html'>content</a></span><span class='op'>(</span><span class='va'>resp</span>, as <span class='op'>=</span> <span class='st'>"parsed"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>content_parsed</span>, max.level <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>List of 6
 $ type          : chr &quot;FeatureCollection&quot;
 $ features      :List of 8552
 $ numberMatched : int 8552
 $ numberReturned: int 8552
 $ links         :List of 4
 $ timeStamp     : chr &quot;2022-04-27T03:27:27.265491Z&quot;</code></pre>
</div>
<p>The data is contained in the <code>features</code> list:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>climate_stations</span> <span class='op'>&lt;-</span> <span class='va'>content_parsed</span><span class='op'>$</span><span class='va'>features</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>climate_stations</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>, max.level <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>List of 4
 $ type      : chr &quot;Feature&quot;
 $ properties:List of 32
  ..$ STN_ID                  : int 8496
  ..$ STATION_NAME            : chr &quot;CARLETON SUR MER&quot;
  ..$ PROV_STATE_TERR_CODE    : chr &quot;QC&quot;
  ..$ ENG_PROV_NAME           : chr &quot;QUEBEC&quot;
  ..$ FRE_PROV_NAME           : chr &quot;QUÉBEC&quot;
  ..$ COUNTRY                 : chr &quot;CAN&quot;
  ..$ LATITUDE                : int 480800000
  ..$ LONGITUDE               : int -660700000
  ..$ TIMEZONE                : chr &quot;EST&quot;
  ..$ ELEVATION               : chr &quot;541.00&quot;
  ..$ CLIMATE_IDENTIFIER      : chr &quot;705AA86&quot;
  ..$ TC_IDENTIFIER           : NULL
  ..$ WMO_IDENTIFIER          : NULL
  ..$ STATION_TYPE            : chr &quot;N/A&quot;
  ..$ NORMAL_CODE             : NULL
  ..$ PUBLICATION_CODE        : int 1
  ..$ DISPLAY_CODE            : int 9
  ..$ ENG_STN_OPERATOR_ACRONYM: NULL
  ..$ FRE_STN_OPERATOR_ACRONYM: NULL
  ..$ ENG_STN_OPERATOR_NAME   : NULL
  ..$ FRE_STN_OPERATOR_NAME   : NULL
  ..$ FIRST_DATE              : chr &quot;1968-10-01 00:00:00&quot;
  ..$ LAST_DATE               : chr &quot;1968-10-31 00:00:00&quot;
  ..$ HLY_FIRST_DATE          : NULL
  ..$ HLY_LAST_DATE           : NULL
  ..$ DLY_FIRST_DATE          : chr &quot;1968-10-01 00:00:00&quot;
  ..$ DLY_LAST_DATE           : chr &quot;1968-10-31 00:00:00&quot;
  ..$ MLY_FIRST_DATE          : NULL
  ..$ MLY_LAST_DATE           : NULL
  ..$ HAS_MONTHLY_SUMMARY     : chr &quot;Y&quot;
  ..$ HAS_NORMALS_DATA        : chr &quot;N&quot;
  ..$ HAS_HOURLY_DATA         : chr &quot;N&quot;
 $ geometry  :List of 2
  ..$ type       : chr &quot;Point&quot;
  ..$ coordinates:List of 2
  .. ..$ : num -66.1
  .. ..$ : num 48.1
 $ id        : chr &quot;705AA86&quot;</code></pre>
</div>
<p>After some frustration, I found that the <code>geometry$coordinates</code> are the correct latitude/longitude – those in the <code>properties</code> list are slightly off for some reason. Extract the data:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>climate_stations</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_dfr</a></span><span class='op'>(</span>
  <span class='va'>climate_stations</span>,
  <span class='op'>~</span> <span class='fu'><a href='https://purrr.tidyverse.org/reference/keep.html'>discard</a></span><span class='op'>(</span><span class='va'>.x</span><span class='op'>$</span><span class='va'>properties</span>, <span class='va'>is.null</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>lat <span class='op'>=</span> <span class='va'>.x</span><span class='op'>$</span><span class='va'>geometry</span><span class='op'>$</span><span class='va'>coordinates</span><span class='op'>[[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>]</span>,
           lon <span class='op'>=</span> <span class='va'>.x</span><span class='op'>$</span><span class='va'>geometry</span><span class='op'>$</span><span class='va'>coordinates</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>
<span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'>janitor</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'># Drop the incorrect latitude and longitude</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>latitude</span>, <span class='op'>-</span><span class='va'>longitude</span><span class='op'>)</span>

<span class='fu'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='op'>(</span><span class='va'>climate_stations</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 8,552
Columns: 32
$ stn_id                   &lt;int&gt; 8496, 9005, 10205, 6149, 6154, 6174~
$ station_name             &lt;chr&gt; &quot;CARLETON SUR MER&quot;, &quot;PORT COLBORNE ~
$ prov_state_terr_code     &lt;chr&gt; &quot;QC&quot;, &quot;ON&quot;, &quot;QC&quot;, &quot;NB&quot;, &quot;NB&quot;, &quot;NB&quot;,~
$ eng_prov_name            &lt;chr&gt; &quot;QUEBEC&quot;, &quot;ONTARIO&quot;, &quot;QUEBEC&quot;, &quot;NEW~
$ fre_prov_name            &lt;chr&gt; &quot;QUÉBEC&quot;, &quot;ONTARIO&quot;, &quot;QUÉBEC&quot;, &quot;NOU~
$ country                  &lt;chr&gt; &quot;CAN&quot;, &quot;CAN&quot;, &quot;CAN&quot;, &quot;CAN&quot;, &quot;CAN&quot;, ~
$ timezone                 &lt;chr&gt; &quot;EST&quot;, &quot;EST&quot;, &quot;EST&quot;, &quot;AST&quot;, &quot;AST&quot;, ~
$ elevation                &lt;chr&gt; &quot;541.00&quot;, &quot;183.50&quot;, &quot;123.80&quot;, &quot;152.~
$ climate_identifier       &lt;chr&gt; &quot;705AA86&quot;, &quot;613F606&quot;, &quot;7113382&quot;, &quot;8~
$ station_type             &lt;chr&gt; &quot;N/A&quot;, &quot;Climate-Auto&quot;, &quot;N/A&quot;, &quot;N/A&quot;~
$ publication_code         &lt;int&gt; 1, NA, NA, 1, 1, 1, 1, 1, 1, 1, 1, ~
$ display_code             &lt;int&gt; 9, NA, NA, 7, 9, 5, 9, 7, 7, 9, 9, ~
$ first_date               &lt;chr&gt; &quot;1968-10-01 00:00:00&quot;, &quot;1992-12-02 ~
$ last_date                &lt;chr&gt; &quot;1968-10-31 00:00:00&quot;, &quot;2022-04-24 ~
$ dly_first_date           &lt;chr&gt; &quot;1968-10-01 00:00:00&quot;, &quot;1992-12-02 ~
$ dly_last_date            &lt;chr&gt; &quot;1968-10-31 00:00:00&quot;, &quot;2022-04-24 ~
$ has_monthly_summary      &lt;chr&gt; &quot;Y&quot;, &quot;Y&quot;, &quot;N&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, ~
$ has_normals_data         &lt;chr&gt; &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, ~
$ has_hourly_data          &lt;chr&gt; &quot;N&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, ~
$ lat                      &lt;dbl&gt; 48.13333, 42.86667, 60.02306, 45.93~
$ lon                      &lt;dbl&gt; -66.11667, -79.25000, -70.00361, -6~
$ tc_identifier            &lt;chr&gt; NA, &quot;WPC&quot;, &quot;YAS&quot;, NA, NA, NA, NA, N~
$ wmo_identifier           &lt;chr&gt; NA, &quot;71463&quot;, NA, NA, NA, NA, NA, NA~
$ eng_stn_operator_acronym &lt;chr&gt; NA, &quot;ECCC - MSC&quot;, &quot;DND&quot;, NA, NA, NA~
$ fre_stn_operator_acronym &lt;chr&gt; NA, &quot;ECCC - SMC&quot;, &quot;MDN&quot;, NA, NA, NA~
$ eng_stn_operator_name    &lt;chr&gt; NA, &quot;Environment and Climate Change~
$ fre_stn_operator_name    &lt;chr&gt; NA, &quot;Environnement et Changement cl~
$ hly_first_date           &lt;chr&gt; NA, &quot;1994-02-01 02:00:00&quot;, &quot;1992-10~
$ hly_last_date            &lt;chr&gt; NA, &quot;2022-04-24 12:30:02&quot;, &quot;2015-09~
$ mly_first_date           &lt;chr&gt; NA, &quot;2006-04-01 00:00:00&quot;, NA, &quot;196~
$ mly_last_date            &lt;chr&gt; NA, &quot;2006-12-01 00:00:00&quot;, NA, &quot;197~
$ normal_code              &lt;chr&gt; NA, NA, NA, &quot;F&quot;, NA, &quot;D&quot;, NA, &quot;F&quot;, ~</code></pre>
</div>
<p>Now I’ll filter this list down to those in Halifax, NS using distance to the bike counter latitude/longitude means:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>climate_stations_halifax</span> <span class='op'>&lt;-</span> <span class='va'>climate_stations</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>prov_state_terr_code</span> <span class='op'>==</span> <span class='st'>"NS"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    <span class='co'># Compare to the mean lat/lon from the bike counters</span>
    diff_lat <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>lat</span> <span class='op'>-</span> <span class='va'>mean_lat</span><span class='op'>)</span>, diff_lon <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>lon</span> <span class='op'>-</span> <span class='va'>mean_lon</span><span class='op'>)</span>,
    <span class='co'># Use squared distance to determine the closest points</span>
    diff2 <span class='op'>=</span> <span class='va'>diff_lat</span><span class='op'>^</span><span class='fl'>2</span> <span class='op'>+</span> <span class='va'>diff_lon</span><span class='op'>^</span><span class='fl'>2</span>
  <span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'># Look at the top 5 for now</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/slice.html'>slice_min</a></span><span class='op'>(</span><span class='va'>diff2</span>, n <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>

<span class='va'>climate_stations_halifax</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>rmarkdown</span><span class='fu'>::</span><span class='fu'><a href='https://pkgs.rstudio.com/rmarkdown/reference/paged_table.html'>paged_table</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["stn_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["station_name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["prov_state_terr_code"],"name":[3],"type":["chr"],"align":["left"]},{"label":["eng_prov_name"],"name":[4],"type":["chr"],"align":["left"]},{"label":["fre_prov_name"],"name":[5],"type":["chr"],"align":["left"]},{"label":["country"],"name":[6],"type":["chr"],"align":["left"]},{"label":["timezone"],"name":[7],"type":["chr"],"align":["left"]},{"label":["elevation"],"name":[8],"type":["chr"],"align":["left"]},{"label":["climate_identifier"],"name":[9],"type":["chr"],"align":["left"]},{"label":["station_type"],"name":[10],"type":["chr"],"align":["left"]},{"label":["publication_code"],"name":[11],"type":["int"],"align":["right"]},{"label":["display_code"],"name":[12],"type":["int"],"align":["right"]},{"label":["first_date"],"name":[13],"type":["chr"],"align":["left"]},{"label":["last_date"],"name":[14],"type":["chr"],"align":["left"]},{"label":["dly_first_date"],"name":[15],"type":["chr"],"align":["left"]},{"label":["dly_last_date"],"name":[16],"type":["chr"],"align":["left"]},{"label":["has_monthly_summary"],"name":[17],"type":["chr"],"align":["left"]},{"label":["has_normals_data"],"name":[18],"type":["chr"],"align":["left"]},{"label":["has_hourly_data"],"name":[19],"type":["chr"],"align":["left"]},{"label":["lat"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["lon"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["tc_identifier"],"name":[22],"type":["chr"],"align":["left"]},{"label":["wmo_identifier"],"name":[23],"type":["chr"],"align":["left"]},{"label":["eng_stn_operator_acronym"],"name":[24],"type":["chr"],"align":["left"]},{"label":["fre_stn_operator_acronym"],"name":[25],"type":["chr"],"align":["left"]},{"label":["eng_stn_operator_name"],"name":[26],"type":["chr"],"align":["left"]},{"label":["fre_stn_operator_name"],"name":[27],"type":["chr"],"align":["left"]},{"label":["hly_first_date"],"name":[28],"type":["chr"],"align":["left"]},{"label":["hly_last_date"],"name":[29],"type":["chr"],"align":["left"]},{"label":["mly_first_date"],"name":[30],"type":["chr"],"align":["left"]},{"label":["mly_last_date"],"name":[31],"type":["chr"],"align":["left"]},{"label":["normal_code"],"name":[32],"type":["chr"],"align":["left"]},{"label":["diff_lat"],"name":[33],"type":["dbl"],"align":["right"]},{"label":["diff_lon"],"name":[34],"type":["dbl"],"align":["right"]},{"label":["diff2"],"name":[35],"type":["dbl"],"align":["right"]}],"data":[{"1":"6357","2":"HALIFAX CITADEL","3":"NS","4":"NOVA SCOTIA","5":"NOUVELLE-ÉCOSSE","6":"CAN","7":"AST","8":"70.10","9":"8202220","10":"Climate-Staffed","11":"1","12":"1","13":"1933-01-01 00:00:00","14":"2002-01-31 00:00:00","15":"1933-08-01 00:00:00","16":"2002-01-31 00:00:00","17":"Y","18":"Y","19":"N","20":"44.65000","21":"-63.58333","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"1933-01-01 00:00:00","31":"2002-01-01 00:00:00","32":"A","33":"0.0003737181","34":"0.002169598","35":"4.846822e-06"},{"1":"43405","2":"HALIFAX DOCKYARD","3":"NS","4":"NOVA SCOTIA","5":"NOUVELLE-ÉCOSSE","6":"CAN","7":"AST","8":"3.80","9":"8202240","10":"Climate-Auto","11":"NA","12":"NA","13":"2004-09-24 18:00:00","14":"2022-04-24 12:30:02","15":"2018-05-14 00:00:00","16":"2022-04-24 00:00:00","17":"Y","18":"N","19":"Y","20":"44.65528","21":"-63.57667","22":"AHD","23":"71328","24":"DND","25":"MDN","26":"Department of National Defence","27":"Ministère de la Défense nationale","28":"2004-09-24 18:00:00","29":"2022-04-24 12:30:02","30":"NA","31":"NA","32":"NA","33":"0.0049040596","34":"0.004497068","35":"4.427343e-05"},{"1":"6356","2":"HALIFAX","3":"NS","4":"NOVA SCOTIA","5":"NOUVELLE-ÉCOSSE","6":"CAN","7":"AST","8":"31.70","9":"8202200","10":"N/A","11":"1","12":"8","13":"1939-01-01 00:00:00","14":"1974-12-01 00:00:00","15":"1939-09-01 00:00:00","16":"1974-07-31 00:00:00","17":"Y","18":"N","19":"N","20":"44.65000","21":"-63.56667","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"1953-01-01 00:00:00","29":"1963-09-14 23:00:00","30":"1939-01-01 00:00:00","31":"1974-12-01 00:00:00","32":"G","33":"0.0003737181","34":"0.014497068","35":"2.103047e-04"},{"1":"6355","2":"HALIFAX","3":"NS","4":"NOVA SCOTIA","5":"NOUVELLE-ÉCOSSE","6":"CAN","7":"AST","8":"29.60","9":"8202198","10":"N/A","11":"1","12":"9","13":"1871-01-01 00:00:00","14":"1933-12-01 00:00:00","15":"1871-04-01 00:00:00","16":"1933-07-31 00:00:00","17":"Y","18":"N","19":"N","20":"44.65000","21":"-63.60000","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"1871-01-01 00:00:00","31":"1933-12-01 00:00:00","32":"NA","33":"0.0003737181","34":"0.018836265","35":"3.549445e-04"},{"1":"6332","2":"DARTMOUTH","3":"NS","4":"NOVA SCOTIA","5":"NOUVELLE-ÉCOSSE","6":"CAN","7":"AST","8":"22.90","9":"8201292","10":"N/A","11":"1","12":"9","13":"1990-01-01 00:00:00","14":"1991-12-31 00:00:00","15":"1990-10-01 00:00:00","16":"1991-12-31 00:00:00","17":"Y","18":"N","19":"N","20":"44.66667","21":"-63.56667","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"1990-01-01 00:00:00","31":"1991-12-01 00:00:00","32":"G","33":"0.0162929485","34":"0.014497068","35":"4.756252e-04"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<p>Visualize the locations of the stations and bike counters:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/bind.html'>bind_rows</a></span><span class='op'>(</span>
  <span class='va'>site_locs</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>group <span class='op'>=</span> <span class='st'>"bike counters"</span>, label <span class='op'>=</span> <span class='va'>site_name</span><span class='op'>)</span>,
  <span class='va'>climate_stations_halifax</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>transmute</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='fu'><a href='https://glue.tidyverse.org/reference/glue.html'>glue</a></span><span class='op'>(</span><span class='st'>"{station_name} ({stn_id})"</span><span class='op'>)</span>,
              <span class='va'>lat</span>, <span class='va'>lon</span>, <span class='va'>diff2</span>, group <span class='op'>=</span> <span class='st'>"climate stations"</span><span class='op'>)</span>
<span class='op'>)</span>
  
<span class='fu'><a href='https://rdrr.io/pkg/ggmap/man/ggmap.html'>ggmap</a></span><span class='op'>(</span><span class='va'>halifax_map</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>d</span>, size <span class='op'>=</span> <span class='fl'>4</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>group</span><span class='op'>)</span>, shape <span class='op'>=</span> <span class='fl'>21</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggrepel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html'>geom_label_repel</a></span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>d</span>,
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>group</span>, label <span class='op'>=</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_trunc.html'>str_trunc</a></span><span class='op'>(</span><span class='va'>label</span>, width <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span>,
    box.padding <span class='op'>=</span> <span class='fl'>1.5</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_void</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-35-1.png" width="624" data-distill-preview=1 /></p>
</div>
<p>Halifax Citadel is the closest to the center, but <code>last_date</code> is 2002-01-31 for this station, so it hasn’t been active for the past two decades. The next closest is the dockyard, which is actively being updated (<code>last_date</code> is 2022-04-24).</p>
<p>Now with the station name (“HALIFAX DOCKYARD”), I can request the daily climate reports:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>resp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://httr.r-lib.org/reference/GET.html'>GET</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span>
    <span class='va'>base_url</span>,
    <span class='st'>"collections/climate-daily/items?f=json&amp;limit=10000&amp;STATION_NAME=HALIFAX%20DOCKYARD"</span>
  <span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>content_parsed</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://httr.r-lib.org/reference/content.html'>content</a></span><span class='op'>(</span><span class='va'>resp</span>, as <span class='op'>=</span> <span class='st'>"parsed"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>content_parsed</span>, max.level <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>List of 6
 $ type          : chr &quot;FeatureCollection&quot;
 $ features      :List of 1399
 $ numberMatched : int 1399
 $ numberReturned: int 1399
 $ links         :List of 4
 $ timeStamp     : chr &quot;2022-04-27T03:27:56.527206Z&quot;</code></pre>
</div>
<p>The <code>features</code> data:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>daily_climate</span> <span class='op'>&lt;-</span> <span class='va'>content_parsed</span><span class='op'>$</span><span class='va'>features</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>daily_climate</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>List of 4
 $ id        : chr &quot;8202240.2021.2.11&quot;
 $ type      : chr &quot;Feature&quot;
 $ geometry  :List of 2
  ..$ coordinates:List of 2
  .. ..$ : num -63.6
  .. ..$ : num 44.7
  ..$ type       : chr &quot;Point&quot;
 $ properties:List of 34
  ..$ STATION_NAME            : chr &quot;HALIFAX DOCKYARD&quot;
  ..$ CLIMATE_IDENTIFIER      : chr &quot;8202240&quot;
  ..$ ID                      : chr &quot;8202240.2021.2.11&quot;
  ..$ LOCAL_DATE              : chr &quot;2021-02-11 00:00:00&quot;
  ..$ PROVINCE_CODE           : chr &quot;NS&quot;
  ..$ LOCAL_YEAR              : int 2021
  ..$ LOCAL_MONTH             : int 2
  ..$ LOCAL_DAY               : int 11
  ..$ MEAN_TEMPERATURE        : num -7.5
  ..$ MEAN_TEMPERATURE_FLAG   : NULL
  ..$ MIN_TEMPERATURE         : num -9.9
  ..$ MIN_TEMPERATURE_FLAG    : NULL
  ..$ MAX_TEMPERATURE         : num -5.1
  ..$ MAX_TEMPERATURE_FLAG    : NULL
  ..$ TOTAL_PRECIPITATION     : NULL
  ..$ TOTAL_PRECIPITATION_FLAG: NULL
  ..$ TOTAL_RAIN              : NULL
  ..$ TOTAL_RAIN_FLAG         : NULL
  ..$ TOTAL_SNOW              : NULL
  ..$ TOTAL_SNOW_FLAG         : NULL
  ..$ SNOW_ON_GROUND          : NULL
  ..$ SNOW_ON_GROUND_FLAG     : NULL
  ..$ DIRECTION_MAX_GUST      : int 28
  ..$ DIRECTION_MAX_GUST_FLAG : NULL
  ..$ SPEED_MAX_GUST          : int 47
  ..$ SPEED_MAX_GUST_FLAG     : NULL
  ..$ COOLING_DEGREE_DAYS     : int 0
  ..$ COOLING_DEGREE_DAYS_FLAG: NULL
  ..$ HEATING_DEGREE_DAYS     : num 25.5
  ..$ HEATING_DEGREE_DAYS_FLAG: NULL
  ..$ MIN_REL_HUMIDITY        : int 41
  ..$ MIN_REL_HUMIDITY_FLAG   : NULL
  ..$ MAX_REL_HUMIDITY        : int 66
  ..$ MAX_REL_HUMIDITY_FLAG   : NULL</code></pre>
</div>
<p>Unfortunately, this station does not report some helpful measurements, like precipitation and snowfall. I might have to expand my search to find a more informative station:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>climate_stations_halifax</span> <span class='op'>&lt;-</span> <span class='va'>climate_stations</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>prov_state_terr_code</span> <span class='op'>==</span> <span class='st'>"NS"</span>,
         <span class='co'># Only include stations with recent data</span>
         <span class='va'>last_date</span> <span class='op'>&gt;</span> <span class='st'>"2022-04-21"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    diff_lat <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>lat</span> <span class='op'>-</span> <span class='va'>mean_lat</span><span class='op'>)</span>, diff_lon <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>lon</span> <span class='op'>-</span> <span class='va'>mean_lon</span><span class='op'>)</span>,
    diff2 <span class='op'>=</span> <span class='va'>diff_lat</span><span class='op'>^</span><span class='fl'>2</span> <span class='op'>+</span> <span class='va'>diff_lon</span><span class='op'>^</span><span class='fl'>2</span>
  <span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/slice.html'>slice_min</a></span><span class='op'>(</span><span class='va'>diff2</span>, n <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>

<span class='va'>climate_stations_halifax</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>rmarkdown</span><span class='fu'>::</span><span class='fu'><a href='https://pkgs.rstudio.com/rmarkdown/reference/paged_table.html'>paged_table</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["stn_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["station_name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["prov_state_terr_code"],"name":[3],"type":["chr"],"align":["left"]},{"label":["eng_prov_name"],"name":[4],"type":["chr"],"align":["left"]},{"label":["fre_prov_name"],"name":[5],"type":["chr"],"align":["left"]},{"label":["country"],"name":[6],"type":["chr"],"align":["left"]},{"label":["timezone"],"name":[7],"type":["chr"],"align":["left"]},{"label":["elevation"],"name":[8],"type":["chr"],"align":["left"]},{"label":["climate_identifier"],"name":[9],"type":["chr"],"align":["left"]},{"label":["station_type"],"name":[10],"type":["chr"],"align":["left"]},{"label":["publication_code"],"name":[11],"type":["int"],"align":["right"]},{"label":["display_code"],"name":[12],"type":["int"],"align":["right"]},{"label":["first_date"],"name":[13],"type":["chr"],"align":["left"]},{"label":["last_date"],"name":[14],"type":["chr"],"align":["left"]},{"label":["dly_first_date"],"name":[15],"type":["chr"],"align":["left"]},{"label":["dly_last_date"],"name":[16],"type":["chr"],"align":["left"]},{"label":["has_monthly_summary"],"name":[17],"type":["chr"],"align":["left"]},{"label":["has_normals_data"],"name":[18],"type":["chr"],"align":["left"]},{"label":["has_hourly_data"],"name":[19],"type":["chr"],"align":["left"]},{"label":["lat"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["lon"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["tc_identifier"],"name":[22],"type":["chr"],"align":["left"]},{"label":["wmo_identifier"],"name":[23],"type":["chr"],"align":["left"]},{"label":["eng_stn_operator_acronym"],"name":[24],"type":["chr"],"align":["left"]},{"label":["fre_stn_operator_acronym"],"name":[25],"type":["chr"],"align":["left"]},{"label":["eng_stn_operator_name"],"name":[26],"type":["chr"],"align":["left"]},{"label":["fre_stn_operator_name"],"name":[27],"type":["chr"],"align":["left"]},{"label":["hly_first_date"],"name":[28],"type":["chr"],"align":["left"]},{"label":["hly_last_date"],"name":[29],"type":["chr"],"align":["left"]},{"label":["mly_first_date"],"name":[30],"type":["chr"],"align":["left"]},{"label":["mly_last_date"],"name":[31],"type":["chr"],"align":["left"]},{"label":["normal_code"],"name":[32],"type":["chr"],"align":["left"]},{"label":["diff_lat"],"name":[33],"type":["dbl"],"align":["right"]},{"label":["diff_lon"],"name":[34],"type":["dbl"],"align":["right"]},{"label":["diff2"],"name":[35],"type":["dbl"],"align":["right"]}],"data":[{"1":"43405","2":"HALIFAX DOCKYARD","3":"NS","4":"NOVA SCOTIA","5":"NOUVELLE-ÉCOSSE","6":"CAN","7":"AST","8":"3.80","9":"8202240","10":"Climate-Auto","11":"NA","12":"NA","13":"2004-09-24 18:00:00","14":"2022-04-24 12:30:02","15":"2018-05-14 00:00:00","16":"2022-04-24 00:00:00","17":"Y","18":"N","19":"Y","20":"44.65528","21":"-63.57667","22":"AHD","23":"71328","24":"DND","25":"MDN","26":"Department of National Defence","27":"Ministère de la Défense nationale","28":"2004-09-24 18:00:00","29":"2022-04-24 12:30:02","30":"NA","31":"NA","32":"NA","33":"0.004904060","34":"0.004497068","35":"4.427343e-05"},{"1":"43403","2":"HALIFAX WINDSOR PARK","3":"NS","4":"NOVA SCOTIA","5":"NOUVELLE-ÉCOSSE","6":"CAN","7":"AST","8":"51.00","9":"8202255","10":"Climate-Auto","11":"NA","12":"NA","13":"2004-09-24 18:00:00","14":"2022-04-24 12:30:02","15":"2018-05-14 00:00:00","16":"2022-04-24 00:00:00","17":"Y","18":"N","19":"Y","20":"44.65694","21":"-63.60889","22":"AHW","23":"71327","24":"DND","25":"MDN","26":"Department of National Defence","27":"Ministère de la Défense nationale","28":"2004-09-24 18:00:00","29":"2022-04-24 12:30:02","30":"NA","31":"NA","32":"NA","33":"0.006570726","34":"0.027725154","35":"8.118586e-04"},{"1":"10945","2":"SHEARWATER JETTY","3":"NS","4":"NOVA SCOTIA","5":"NOUVELLE-ÉCOSSE","6":"CAN","7":"AST","8":"5.50","9":"8205093","10":"Climate-Auto","11":"NA","12":"NA","13":"1994-02-01 03:00:00","14":"2022-04-24 12:30:02","15":"2018-05-14 00:00:00","16":"2022-04-24 00:00:00","17":"Y","18":"N","19":"Y","20":"44.62778","21":"-63.52333","22":"WZU","23":"71330","24":"DND","25":"MDN","26":"Department of National Defence","27":"Ministère de la Défense nationale","28":"1994-02-01 03:00:00","29":"2022-04-24 12:30:02","30":"NA","31":"NA","32":"NA","33":"0.022595940","34":"0.057830402","35":"3.854932e-03"},{"1":"7169","2":"MCNABS ISLAND (AUT)","3":"NS","4":"NOVA SCOTIA","5":"NOUVELLE-ÉCOSSE","6":"CAN","7":"AST","8":"15.40","9":"8203478","10":"Climate-Auto","11":"NA","12":"NA","13":"1999-10-13 18:00:00","14":"2022-04-24 12:30:02","15":"2005-11-01 00:00:00","16":"2022-04-24 00:00:00","17":"Y","18":"N","19":"N","20":"44.60000","21":"-63.53333","22":"XMI","23":"NA","24":"ECCC - MSC","25":"ECCC - SMC","26":"Environment and Climate Change Canada - Meteorological Service of Canada","27":"Environnement et Changement climatique Canada - Service météorologique du Canada","28":"1999-10-13 18:00:00","29":"2022-04-24 12:30:02","30":"NA","31":"NA","32":"NA","33":"0.050373718","34":"0.047830402","35":"4.825259e-03"},{"1":"43124","2":"HALIFAX KOOTENAY","3":"NS","4":"NOVA SCOTIA","5":"NOUVELLE-ÉCOSSE","6":"CAN","7":"AST","8":"52.00","9":"8202252","10":"Climate-Auto","11":"NA","12":"NA","13":"2004-09-28 16:00:00","14":"2022-04-24 12:30:02","15":"2018-05-14 00:00:00","16":"2022-04-24 00:00:00","17":"Y","18":"N","19":"Y","20":"44.58764","21":"-63.55083","22":"AHK","23":"71326","24":"DND","25":"MDN","26":"Department of National Defence","27":"Ministère de la Défense nationale","28":"2004-09-28 16:00:00","29":"2022-04-24 12:30:02","30":"NA","31":"NA","32":"NA","33":"0.062734829","34":"0.030330402","35":"4.855592e-03"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<p>Visualize these station locations in a zoomed out map:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hrm_map</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/ggmap/man/get_googlemap.html'>get_googlemap</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>mean_lon</span>, <span class='va'>mean_lat</span><span class='op'>)</span>,
                         zoom <span class='op'>=</span> <span class='fl'>12</span>, maptype <span class='op'>=</span> <span class='st'>"satellite"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/bind.html'>bind_rows</a></span><span class='op'>(</span>
  <span class='va'>site_locs</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>group <span class='op'>=</span> <span class='st'>"bike counters"</span>, label <span class='op'>=</span> <span class='va'>site_name</span><span class='op'>)</span>,
  <span class='va'>climate_stations_halifax</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
    <span class='co'>#filter(station_name == "HALIFAX WINDSOR PARK")</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>transmute</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='fu'><a href='https://glue.tidyverse.org/reference/glue.html'>glue</a></span><span class='op'>(</span><span class='st'>"{station_name} ({stn_id})"</span><span class='op'>)</span>,
              <span class='va'>lat</span>, <span class='va'>lon</span>, <span class='va'>diff2</span>, group <span class='op'>=</span> <span class='st'>"climate stations"</span><span class='op'>)</span>
<span class='op'>)</span>
  
<span class='fu'><a href='https://rdrr.io/pkg/ggmap/man/ggmap.html'>ggmap</a></span><span class='op'>(</span><span class='va'>hrm_map</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>d</span>, size <span class='op'>=</span> <span class='fl'>4</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>group</span><span class='op'>)</span>, shape <span class='op'>=</span> <span class='fl'>21</span>, color <span class='op'>=</span> <span class='st'>"white"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggrepel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html'>geom_label_repel</a></span><span class='op'>(</span>
    data <span class='op'>=</span> <span class='va'>d</span>,
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>group</span>, label <span class='op'>=</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_trunc.html'>str_trunc</a></span><span class='op'>(</span><span class='va'>label</span>, width <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span>,
    box.padding <span class='op'>=</span> <span class='fl'>0.5</span>, force <span class='op'>=</span> <span class='fl'>1.5</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_void</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-39-1.png" width="624" /></p>
</div>
<p>Exploring the data from these stations a bit (not shown), Halifax Windsor Park seems a reasonable choice in terms of available data.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>resp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://httr.r-lib.org/reference/GET.html'>GET</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>base_url</span>,
         <span class='st'>"collections/climate-daily/items?f=json&amp;limit=10000&amp;STATION_NAME="</span>,
         <span class='fu'><a href='https://rdrr.io/r/utils/URLencode.html'>URLencode</a></span><span class='op'>(</span><span class='st'>"HALIFAX WINDSOR PARK"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>content_parsed</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://httr.r-lib.org/reference/content.html'>content</a></span><span class='op'>(</span><span class='va'>resp</span>, as <span class='op'>=</span> <span class='st'>"parsed"</span><span class='op'>)</span>

<span class='va'>daily_climate</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map_dfr</a></span><span class='op'>(</span>
  <span class='va'>content_parsed</span><span class='op'>$</span><span class='va'>features</span>,
  <span class='op'>~</span> <span class='fu'><a href='https://purrr.tidyverse.org/reference/keep.html'>discard</a></span><span class='op'>(</span><span class='va'>.x</span><span class='op'>$</span><span class='va'>properties</span>, <span class='va'>is.null</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'>janitor</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='op'>(</span><span class='va'>daily_climate</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 1,431
Columns: 29
$ station_name             &lt;chr&gt; &quot;HALIFAX WINDSOR PARK&quot;, &quot;HALIFAX WI~
$ climate_identifier       &lt;chr&gt; &quot;8202255&quot;, &quot;8202255&quot;, &quot;8202255&quot;, &quot;8~
$ id                       &lt;chr&gt; &quot;8202255.2021.2.11&quot;, &quot;8202255.2021.~
$ local_date               &lt;chr&gt; &quot;2021-02-11 00:00:00&quot;, &quot;2021-02-12 ~
$ province_code            &lt;chr&gt; &quot;NS&quot;, &quot;NS&quot;, &quot;NS&quot;, &quot;NS&quot;, &quot;NS&quot;, &quot;NS&quot;,~
$ local_year               &lt;int&gt; 2021, 2021, 2021, 2021, 2021, 2018,~
$ local_month              &lt;int&gt; 2, 2, 2, 2, 2, 5, 5, 5, 5, 5, 5, 5,~
$ local_day                &lt;int&gt; 11, 12, 13, 14, 15, 14, 15, 16, 17,~
$ mean_temperature         &lt;dbl&gt; -8.1, -8.1, -5.2, -5.0, -1.5, 10.8,~
$ min_temperature          &lt;dbl&gt; -11.1, -13.0, -8.0, -8.9, -5.4, 5.0~
$ max_temperature          &lt;dbl&gt; -5.2, -3.2, -2.3, -1.2, 2.4, 16.5, ~
$ snow_on_ground           &lt;int&gt; 13, 12, 11, 11, 11, NA, NA, NA, NA,~
$ direction_max_gust       &lt;int&gt; 26, 30, NA, NA, NA, 22, 21, 33, NA,~
$ speed_max_gust           &lt;int&gt; 42, 32, NA, NA, NA, 38, 48, 32, NA,~
$ cooling_degree_days      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,~
$ heating_degree_days      &lt;dbl&gt; 26.1, 26.1, 23.2, 23.0, 19.5, 7.2, ~
$ min_rel_humidity         &lt;int&gt; 39, 66, 52, 67, 40, 37, 68, 40, 38,~
$ max_rel_humidity         &lt;int&gt; 68, 87, 90, 90, 83, 90, 96, 87, 97,~
$ total_precipitation_flag &lt;chr&gt; NA, NA, NA, NA, &quot;M&quot;, NA, NA, NA, NA~
$ total_precipitation      &lt;dbl&gt; NA, NA, NA, NA, NA, 0.0, 0.6, 0.0, ~
$ mean_temperature_flag    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ min_temperature_flag     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ max_temperature_flag     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ direction_max_gust_flag  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ speed_max_gust_flag      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ cooling_degree_days_flag &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ heating_degree_days_flag &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ min_rel_humidity_flag    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ max_rel_humidity_flag    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA,~</code></pre>
</div>
<h3 id="eda-and-cleaning-1">EDA and cleaning</h3>
<p>Variable summaries:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>skimr</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='va'>daily_climate</span><span class='op'>)</span>
</code></pre>
</div>
<table>
<caption><span id="tab:unnamed-chunk-42">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">daily_climate</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1431</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">29</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">14</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">station_name</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">climate_identifier</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">id</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1431</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">local_date</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1431</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">province_code</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">total_precipitation_flag</td>
<td style="text-align: right;">1098</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mean_temperature_flag</td>
<td style="text-align: right;">1412</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">min_temperature_flag</td>
<td style="text-align: right;">1412</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">max_temperature_flag</td>
<td style="text-align: right;">1412</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">direction_max_gust_flag</td>
<td style="text-align: right;">1412</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">speed_max_gust_flag</td>
<td style="text-align: right;">1412</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">cooling_degree_days_flag</td>
<td style="text-align: right;">1412</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">heating_degree_days_flag</td>
<td style="text-align: right;">1412</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">min_rel_humidity_flag</td>
<td style="text-align: right;">1412</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">max_rel_humidity_flag</td>
<td style="text-align: right;">1409</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">local_year</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2019.83</td>
<td style="text-align: right;">1.20</td>
<td style="text-align: right;">2018.0</td>
<td style="text-align: right;">2019.0</td>
<td style="text-align: right;">2020.0</td>
<td style="text-align: right;">2021.00</td>
<td style="text-align: right;">2022.0</td>
<td style="text-align: left;">▅▇▇▇▂</td>
</tr>
<tr class="even">
<td style="text-align: left;">local_month</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">6.59</td>
<td style="text-align: right;">3.44</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">7.0</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">12.0</td>
<td style="text-align: left;">▇▅▅▅▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">local_day</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">15.85</td>
<td style="text-align: right;">8.76</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">8.0</td>
<td style="text-align: right;">16.0</td>
<td style="text-align: right;">23.00</td>
<td style="text-align: right;">31.0</td>
<td style="text-align: left;">▇▇▇▇▆</td>
</tr>
<tr class="even">
<td style="text-align: left;">mean_temperature</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">8.51</td>
<td style="text-align: right;">9.16</td>
<td style="text-align: right;">-13.5</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">8.2</td>
<td style="text-align: right;">16.30</td>
<td style="text-align: right;">26.8</td>
<td style="text-align: left;">▂▆▇▇▅</td>
</tr>
<tr class="odd">
<td style="text-align: left;">min_temperature</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">4.12</td>
<td style="text-align: right;">8.95</td>
<td style="text-align: right;">-17.3</td>
<td style="text-align: right;">-2.1</td>
<td style="text-align: right;">3.9</td>
<td style="text-align: right;">11.93</td>
<td style="text-align: right;">20.7</td>
<td style="text-align: left;">▂▅▇▆▆</td>
</tr>
<tr class="even">
<td style="text-align: left;">max_temperature</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">12.90</td>
<td style="text-align: right;">9.66</td>
<td style="text-align: right;">-11.0</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">12.9</td>
<td style="text-align: right;">21.20</td>
<td style="text-align: right;">34.1</td>
<td style="text-align: left;">▂▇▇▇▃</td>
</tr>
<tr class="odd">
<td style="text-align: left;">snow_on_ground</td>
<td style="text-align: right;">1061</td>
<td style="text-align: right;">0.26</td>
<td style="text-align: right;">2.82</td>
<td style="text-align: right;">4.07</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">24.0</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">direction_max_gust</td>
<td style="text-align: right;">554</td>
<td style="text-align: right;">0.61</td>
<td style="text-align: right;">23.77</td>
<td style="text-align: right;">8.16</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">24.0</td>
<td style="text-align: right;">30.00</td>
<td style="text-align: right;">36.0</td>
<td style="text-align: left;">▂▃▅▇▆</td>
</tr>
<tr class="odd">
<td style="text-align: left;">speed_max_gust</td>
<td style="text-align: right;">554</td>
<td style="text-align: right;">0.61</td>
<td style="text-align: right;">42.48</td>
<td style="text-align: right;">10.34</td>
<td style="text-align: right;">31.0</td>
<td style="text-align: right;">35.0</td>
<td style="text-align: right;">40.0</td>
<td style="text-align: right;">47.00</td>
<td style="text-align: right;">96.0</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">cooling_degree_days</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">0.61</td>
<td style="text-align: right;">1.48</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">8.8</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">heating_degree_days</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">10.10</td>
<td style="text-align: right;">8.32</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">1.7</td>
<td style="text-align: right;">9.8</td>
<td style="text-align: right;">16.70</td>
<td style="text-align: right;">31.5</td>
<td style="text-align: left;">▇▅▅▃▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">min_rel_humidity</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">56.63</td>
<td style="text-align: right;">18.72</td>
<td style="text-align: right;">15.0</td>
<td style="text-align: right;">42.0</td>
<td style="text-align: right;">56.0</td>
<td style="text-align: right;">70.00</td>
<td style="text-align: right;">100.0</td>
<td style="text-align: left;">▂▇▇▆▂</td>
</tr>
<tr class="odd">
<td style="text-align: left;">max_rel_humidity</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">92.31</td>
<td style="text-align: right;">9.40</td>
<td style="text-align: right;">47.0</td>
<td style="text-align: right;">88.0</td>
<td style="text-align: right;">96.0</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: right;">100.0</td>
<td style="text-align: left;">▁▁▁▂▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">total_precipitation</td>
<td style="text-align: right;">554</td>
<td style="text-align: right;">0.61</td>
<td style="text-align: right;">4.16</td>
<td style="text-align: right;">9.75</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">102.4</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
<p>Drop some un-needed variables:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>daily_climate</span> <span class='op'>&lt;-</span> <span class='va'>daily_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>station_name</span>, <span class='op'>-</span><span class='va'>climate_identifier</span>, <span class='op'>-</span><span class='va'>id</span>, <span class='op'>-</span><span class='va'>province_code</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Process the date variable:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>daily_climate</span> <span class='op'>&lt;-</span> <span class='va'>daily_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>report_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.POSIXlt.html'>as.POSIXct</a></span><span class='op'>(</span><span class='va'>local_date</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'># Can drop these now</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>local_date</span>, <span class='op'>-</span><span class='va'>local_year</span>, <span class='op'>-</span><span class='va'>local_month</span>, <span class='op'>-</span><span class='va'>local_day</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>There happens to be some missing days:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span>report_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.Date.html'>seq.Date</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='st'>"2018-05-14"</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='st'>"2022-04-22"</span><span class='op'>)</span>,
                              by <span class='op'>=</span> <span class='st'>"days"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter-joins.html'>anti_join</a></span><span class='op'>(</span><span class='va'>daily_climate</span>, by <span class='op'>=</span> <span class='st'>"report_date"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/pull.html'>pull</a></span><span class='op'>(</span><span class='va'>report_date</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] &quot;2020-01-02&quot; &quot;2020-01-03&quot; &quot;2020-01-04&quot; &quot;2020-01-05&quot; &quot;2020-01-06&quot;
 [6] &quot;2021-01-03&quot; &quot;2021-01-04&quot; &quot;2021-01-05&quot; &quot;2021-01-06&quot; &quot;2021-01-07&quot;
[11] &quot;2022-01-03&quot;</code></pre>
</div>
<p>Seems odd that all of the missing days are in January of different years.</p>
<p>There are also some missing temperature values:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>daily_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>mean_temperature</span><span class='op'>)</span> <span class='op'>|</span> <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>min_temperature</span><span class='op'>)</span> <span class='op'>|</span> <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>max_temperature</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>report_date</span>, <span class='fu'><a href='https://tidyselect.r-lib.org/reference/starts_with.html'>contains</a></span><span class='op'>(</span><span class='st'>"_temperature"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'>rmarkdown</span><span class='fu'>::</span><span class='fu'><a href='https://pkgs.rstudio.com/rmarkdown/reference/paged_table.html'>paged_table</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["report_date"],"name":[1],"type":["date"],"align":["right"]},{"label":["mean_temperature"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["min_temperature"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["max_temperature"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["mean_temperature_flag"],"name":[5],"type":["chr"],"align":["left"]},{"label":["min_temperature_flag"],"name":[6],"type":["chr"],"align":["left"]},{"label":["max_temperature_flag"],"name":[7],"type":["chr"],"align":["left"]}],"data":[{"1":"2018-06-04","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2018-11-21","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2018-11-25","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2019-03-15","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2019-07-24","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2020-01-01","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2020-01-07","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2020-02-11","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2020-05-14","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2020-09-02","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2020-09-03","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2020-09-23","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2021-01-08","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2022-02-16","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2022-02-15","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2021-08-10","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2022-01-06","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2022-01-04","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"},{"1":"2022-01-05","2":"NA","3":"NA","4":"NA","5":"M","6":"M","7":"M"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<p>The <code>report_date</code>s range from 2018 to 2022. The flag values (<code>*_temperature_flag</code>) are all “M”, telling us what we already know: the data is missing.</p>
<p>For non-missing values, here is the trend over time:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>daily_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>mean_temperature</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>report_date</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>mean_temperature</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='va'>td_colors</span><span class='op'>$</span><span class='va'>nice</span><span class='op'>$</span><span class='va'>ruby_red</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-47-1.png" width="624" /></p>
</div>
<p>The <code>total_precipitation</code> values:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>daily_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>total_precipitation</span>, <span class='va'>total_precipitation_flag</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>total_precipitation</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'>rmarkdown</span><span class='fu'>::</span><span class='fu'><a href='https://pkgs.rstudio.com/rmarkdown/reference/paged_table.html'>paged_table</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["total_precipitation"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["total_precipitation_flag"],"name":[2],"type":["chr"],"align":["left"]},{"label":["n"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"NA","2":"M","3":"333"},{"1":"NA","2":"NA","3":"221"},{"1":"0.0","2":"NA","3":"472"},{"1":"0.2","2":"NA","3":"69"},{"1":"0.4","2":"NA","3":"26"},{"1":"0.6","2":"NA","3":"12"},{"1":"0.8","2":"NA","3":"9"},{"1":"1.0","2":"NA","3":"6"},{"1":"1.2","2":"NA","3":"6"},{"1":"1.4","2":"NA","3":"16"},{"1":"1.6","2":"NA","3":"9"},{"1":"1.8","2":"NA","3":"3"},{"1":"2.0","2":"NA","3":"7"},{"1":"2.2","2":"NA","3":"5"},{"1":"2.4","2":"NA","3":"7"},{"1":"2.6","2":"NA","3":"4"},{"1":"2.8","2":"NA","3":"5"},{"1":"3.0","2":"NA","3":"7"},{"1":"3.2","2":"NA","3":"5"},{"1":"3.4","2":"NA","3":"4"},{"1":"3.6","2":"NA","3":"7"},{"1":"3.8","2":"NA","3":"5"},{"1":"4.0","2":"NA","3":"6"},{"1":"4.2","2":"NA","3":"5"},{"1":"4.4","2":"NA","3":"4"},{"1":"4.8","2":"NA","3":"5"},{"1":"5.0","2":"NA","3":"2"},{"1":"5.2","2":"NA","3":"1"},{"1":"5.4","2":"NA","3":"2"},{"1":"5.6","2":"NA","3":"3"},{"1":"5.8","2":"NA","3":"3"},{"1":"6.0","2":"NA","3":"3"},{"1":"6.2","2":"NA","3":"1"},{"1":"6.4","2":"NA","3":"2"},{"1":"6.6","2":"NA","3":"4"},{"1":"6.8","2":"NA","3":"2"},{"1":"7.2","2":"NA","3":"3"},{"1":"7.4","2":"NA","3":"3"},{"1":"7.6","2":"NA","3":"4"},{"1":"7.8","2":"NA","3":"1"},{"1":"8.0","2":"NA","3":"4"},{"1":"8.4","2":"NA","3":"3"},{"1":"8.6","2":"NA","3":"3"},{"1":"8.8","2":"NA","3":"2"},{"1":"9.0","2":"NA","3":"1"},{"1":"9.8","2":"NA","3":"2"},{"1":"10.0","2":"NA","3":"4"},{"1":"10.4","2":"NA","3":"2"},{"1":"10.6","2":"NA","3":"3"},{"1":"10.8","2":"NA","3":"1"},{"1":"11.0","2":"NA","3":"1"},{"1":"11.2","2":"NA","3":"2"},{"1":"11.6","2":"NA","3":"3"},{"1":"11.8","2":"NA","3":"4"},{"1":"12.0","2":"NA","3":"2"},{"1":"12.2","2":"NA","3":"1"},{"1":"12.4","2":"NA","3":"1"},{"1":"12.6","2":"NA","3":"2"},{"1":"12.8","2":"NA","3":"2"},{"1":"13.0","2":"NA","3":"1"},{"1":"13.8","2":"NA","3":"1"},{"1":"14.0","2":"NA","3":"2"},{"1":"14.2","2":"NA","3":"1"},{"1":"14.6","2":"NA","3":"3"},{"1":"15.0","2":"NA","3":"1"},{"1":"15.4","2":"NA","3":"5"},{"1":"15.6","2":"NA","3":"2"},{"1":"15.8","2":"NA","3":"1"},{"1":"16.0","2":"NA","3":"3"},{"1":"17.4","2":"NA","3":"1"},{"1":"17.6","2":"NA","3":"2"},{"1":"17.8","2":"NA","3":"2"},{"1":"18.0","2":"NA","3":"1"},{"1":"18.4","2":"NA","3":"1"},{"1":"18.6","2":"NA","3":"1"},{"1":"18.8","2":"NA","3":"1"},{"1":"19.2","2":"NA","3":"1"},{"1":"19.4","2":"NA","3":"1"},{"1":"19.8","2":"NA","3":"2"},{"1":"20.0","2":"NA","3":"1"},{"1":"20.2","2":"NA","3":"1"},{"1":"20.4","2":"NA","3":"1"},{"1":"20.6","2":"NA","3":"2"},{"1":"21.2","2":"NA","3":"1"},{"1":"21.4","2":"NA","3":"1"},{"1":"21.6","2":"NA","3":"1"},{"1":"21.8","2":"NA","3":"1"},{"1":"23.0","2":"NA","3":"1"},{"1":"23.2","2":"NA","3":"1"},{"1":"23.4","2":"NA","3":"1"},{"1":"23.6","2":"NA","3":"2"},{"1":"24.4","2":"NA","3":"1"},{"1":"24.6","2":"NA","3":"1"},{"1":"24.8","2":"NA","3":"2"},{"1":"25.0","2":"NA","3":"1"},{"1":"25.4","2":"NA","3":"1"},{"1":"26.6","2":"NA","3":"1"},{"1":"26.8","2":"NA","3":"2"},{"1":"27.0","2":"NA","3":"3"},{"1":"27.2","2":"NA","3":"1"},{"1":"27.4","2":"NA","3":"2"},{"1":"27.8","2":"NA","3":"1"},{"1":"28.2","2":"NA","3":"1"},{"1":"29.2","2":"NA","3":"2"},{"1":"29.4","2":"NA","3":"2"},{"1":"29.6","2":"NA","3":"2"},{"1":"29.8","2":"NA","3":"2"},{"1":"30.0","2":"NA","3":"1"},{"1":"33.8","2":"NA","3":"1"},{"1":"34.0","2":"NA","3":"1"},{"1":"34.4","2":"NA","3":"1"},{"1":"35.0","2":"NA","3":"1"},{"1":"35.8","2":"NA","3":"1"},{"1":"37.0","2":"NA","3":"1"},{"1":"37.4","2":"NA","3":"1"},{"1":"39.6","2":"NA","3":"1"},{"1":"40.0","2":"NA","3":"1"},{"1":"40.8","2":"NA","3":"2"},{"1":"42.2","2":"NA","3":"1"},{"1":"44.6","2":"NA","3":"1"},{"1":"45.4","2":"NA","3":"1"},{"1":"46.2","2":"NA","3":"2"},{"1":"46.4","2":"NA","3":"1"},{"1":"48.2","2":"NA","3":"1"},{"1":"56.6","2":"NA","3":"1"},{"1":"59.2","2":"NA","3":"1"},{"1":"63.0","2":"NA","3":"1"},{"1":"70.2","2":"NA","3":"1"},{"1":"102.4","2":"NA","3":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<p>There are missing <code>total_precipitation</code> values with NA <code>total_precipitation_flag</code>, which makes me think that the flag variables are not going to be useful/reliable.</p>
<p>Visualize the non-missing:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>daily_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>total_precipitation</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>report_date</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>total_precipitation</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='va'>td_colors</span><span class='op'>$</span><span class='va'>nice</span><span class='op'>$</span><span class='va'>spanish_blue</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-49-1.png" width="624" /></p>
</div>
<p>The <code>snow_on_ground</code> values:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>daily_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>snow_on_ground</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>snow_on_ground</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'>rmarkdown</span><span class='fu'>::</span><span class='fu'><a href='https://pkgs.rstudio.com/rmarkdown/reference/paged_table.html'>paged_table</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["snow_on_ground"],"name":[1],"type":["int"],"align":["right"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"NA","2":"1061"},{"1":"0","2":"100"},{"1":"1","2":"109"},{"1":"2","2":"59"},{"1":"3","2":"18"},{"1":"4","2":"9"},{"1":"5","2":"15"},{"1":"6","2":"5"},{"1":"7","2":"6"},{"1":"8","2":"3"},{"1":"9","2":"6"},{"1":"10","2":"12"},{"1":"11","2":"13"},{"1":"12","2":"4"},{"1":"13","2":"3"},{"1":"14","2":"1"},{"1":"16","2":"2"},{"1":"17","2":"1"},{"1":"19","2":"1"},{"1":"23","2":"1"},{"1":"24","2":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>daily_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>snow_on_ground</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>report_date</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>snow_on_ground</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='va'>td_colors</span><span class='op'>$</span><span class='va'>nice</span><span class='op'>$</span><span class='va'>spanish_blue</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-51-1.png" width="624" /></p>
</div>
<p>The <code>speed_max_gust</code> values (in km/h):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>daily_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>speed_max_gust</span>, <span class='va'>speed_max_gust_flag</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>speed_max_gust</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'>rmarkdown</span><span class='fu'>::</span><span class='fu'><a href='https://pkgs.rstudio.com/rmarkdown/reference/paged_table.html'>paged_table</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["speed_max_gust"],"name":[1],"type":["int"],"align":["right"]},{"label":["speed_max_gust_flag"],"name":[2],"type":["chr"],"align":["left"]},{"label":["n"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"NA","2":"M","3":"19"},{"1":"NA","2":"NA","3":"535"},{"1":"31","2":"NA","3":"42"},{"1":"32","2":"NA","3":"58"},{"1":"33","2":"NA","3":"56"},{"1":"34","2":"NA","3":"63"},{"1":"35","2":"NA","3":"45"},{"1":"36","2":"NA","3":"52"},{"1":"37","2":"NA","3":"41"},{"1":"38","2":"NA","3":"38"},{"1":"39","2":"NA","3":"39"},{"1":"40","2":"NA","3":"33"},{"1":"41","2":"NA","3":"51"},{"1":"42","2":"NA","3":"30"},{"1":"43","2":"NA","3":"22"},{"1":"44","2":"NA","3":"29"},{"1":"45","2":"NA","3":"20"},{"1":"46","2":"NA","3":"15"},{"1":"47","2":"NA","3":"30"},{"1":"48","2":"NA","3":"16"},{"1":"49","2":"NA","3":"11"},{"1":"50","2":"NA","3":"13"},{"1":"51","2":"NA","3":"14"},{"1":"52","2":"NA","3":"11"},{"1":"53","2":"NA","3":"15"},{"1":"54","2":"NA","3":"15"},{"1":"55","2":"NA","3":"14"},{"1":"56","2":"NA","3":"10"},{"1":"57","2":"NA","3":"10"},{"1":"58","2":"NA","3":"4"},{"1":"59","2":"NA","3":"7"},{"1":"60","2":"NA","3":"6"},{"1":"61","2":"NA","3":"6"},{"1":"62","2":"NA","3":"7"},{"1":"63","2":"NA","3":"2"},{"1":"64","2":"NA","3":"11"},{"1":"65","2":"NA","3":"5"},{"1":"66","2":"NA","3":"6"},{"1":"67","2":"NA","3":"4"},{"1":"68","2":"NA","3":"5"},{"1":"69","2":"NA","3":"4"},{"1":"70","2":"NA","3":"3"},{"1":"71","2":"NA","3":"3"},{"1":"73","2":"NA","3":"2"},{"1":"74","2":"NA","3":"1"},{"1":"75","2":"NA","3":"1"},{"1":"76","2":"NA","3":"1"},{"1":"79","2":"NA","3":"1"},{"1":"80","2":"NA","3":"1"},{"1":"82","2":"NA","3":"1"},{"1":"83","2":"NA","3":"1"},{"1":"86","2":"NA","3":"1"},{"1":"96","2":"NA","3":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>daily_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>speed_max_gust</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>report_date</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>speed_max_gust</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='va'>td_colors</span><span class='op'>$</span><span class='va'>nice</span><span class='op'>$</span><span class='va'>emerald</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-53-1.png" width="624" /></p>
</div>
<h2 id="combining-the-data">Combining the data</h2>
<p>Now I’ll combine the two data sets (joining on the date), only taking the most useful variables from the climate report (temperature, precipitation, wind speed, snow):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_counts_climate</span> <span class='op'>&lt;-</span> <span class='va'>bike_data_daily_counts</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join</a></span><span class='op'>(</span>
    <span class='va'>daily_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
      <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>report_date</span>, <span class='va'>mean_temperature</span>, <span class='va'>total_precipitation</span>,
             <span class='va'>speed_max_gust</span>, <span class='va'>snow_on_ground</span><span class='op'>)</span>,
    by <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"count_date"</span> <span class='op'>=</span> <span class='st'>"report_date"</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='fu'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='op'>(</span><span class='va'>bike_counts_climate</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 2,840
Columns: 9
$ site_name           &lt;chr&gt; &quot;Dartmouth Harbourfront Greenway&quot;, &quot;Dart~
$ installation_date   &lt;date&gt; 2021-07-08, 2021-07-08, 2021-07-08, 202~
$ count_date          &lt;date&gt; 2021-07-08, 2021-07-09, 2021-07-10, 202~
$ n_records           &lt;int&gt; 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, ~
$ n_bikes             &lt;int&gt; 130, 54, 180, 245, 208, 250, 182, 106, 1~
$ mean_temperature    &lt;dbl&gt; 18.2, 17.6, 21.0, 21.0, 20.6, 18.6, 17.7~
$ total_precipitation &lt;dbl&gt; 0.6, 10.0, 0.4, 0.0, 0.0, 0.0, 0.0, 11.6~
$ speed_max_gust      &lt;int&gt; NA, 54, 56, NA, NA, NA, NA, 32, 37, NA, ~
$ snow_on_ground      &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ~</code></pre>
</div>
<p>Visualize the missing climate data:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bike_counts_climate</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/distinct.html'>distinct</a></span><span class='op'>(</span><span class='va'>count_date</span>, <span class='va'>mean_temperature</span>, <span class='va'>total_precipitation</span>,
           <span class='va'>speed_max_gust</span>, <span class='va'>snow_on_ground</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/across.html'>across</a></span><span class='op'>(</span><span class='fu'>where</span><span class='op'>(</span><span class='va'>is.numeric</span><span class='op'>)</span>, <span class='va'>is.na</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='op'>(</span>cols <span class='op'>=</span> <span class='op'>-</span><span class='va'>count_date</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>count_date</span>, y <span class='op'>=</span> <span class='va'>name</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_tile.html'>geom_tile</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>value</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='cn'>NULL</span>, x <span class='op'>=</span> <span class='cn'>NULL</span>, fill <span class='op'>=</span> <span class='st'>"Missing"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>td_colors</span><span class='op'>$</span><span class='va'>nice</span><span class='op'>$</span><span class='va'>indigo_blue</span>, <span class='st'>"gray80"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_date.html'>scale_x_date</a></span><span class='op'>(</span>expand <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_discrete.html'>scale_y_discrete</a></span><span class='op'>(</span>expand <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"top"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="predicting-bike-ridership-getting-the-data_files/figure-html5/unnamed-chunk-55-1.png" width="480" /></p>
</div>
<p>Quite a bit of missing data, but we should have enough to make an interesting model. Save the data:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://readr.tidyverse.org/reference/read_rds.html'>write_rds</a></span><span class='op'>(</span><span class='va'>bike_counts_climate</span>, <span class='st'>"bike-ridership-data.rds"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 class="appendix" id="reproducibility">Reproducibility</h2>
<details>
<summary>
Session info
</summary>
<div class="layout-chunk" data-layout="l-body">
<pre><code> setting  value                       
 version  R version 4.1.3 (2022-03-10)
 os       Windows 10 x64              
 system   x86_64, mingw32             
 ui       RTerm                       
 language (EN)                        
 collate  English_Canada.1252         
 ctype    English_Canada.1252         
 tz       America/Curacao             
 date     2022-04-26                  </code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["package"],"name":[1],"type":["chr"],"align":["left"]},{"label":["ondiskversion"],"name":[2],"type":["chr"],"align":["left"]},{"label":["loadedversion"],"name":[3],"type":["chr"],"align":["left"]},{"label":["path"],"name":[4],"type":["chr"],"align":["left"]},{"label":["loadedpath"],"name":[5],"type":["chr"],"align":["left"]},{"label":["attached"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["is_base"],"name":[7],"type":["lgl"],"align":["right"]},{"label":["date"],"name":[8],"type":["chr"],"align":["left"]},{"label":["source"],"name":[9],"type":["chr"],"align":["left"]},{"label":["md5ok"],"name":[10],"type":["lgl"],"align":["right"]},{"label":["library"],"name":[11],"type":["fct"],"align":["left"]}],"data":[{"1":"assertthat","2":"0.2.1","3":"0.2.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/assertthat","5":"C:/Users/tdunn/Documents/R/win-library/4.1/assertthat","6":"FALSE","7":"FALSE","8":"2019-03-21","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"assertthat"},{"1":"backports","2":"1.2.1","3":"1.2.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/backports","5":"C:/Users/tdunn/Documents/R/win-library/4.1/backports","6":"FALSE","7":"FALSE","8":"2020-12-09","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"backports"},{"1":"base64enc","2":"0.1.3","3":"0.1-3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/base64enc","5":"C:/Users/tdunn/Documents/R/win-library/4.1/base64enc","6":"FALSE","7":"FALSE","8":"2015-07-28","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"base64enc"},{"1":"bitops","2":"1.0.7","3":"1.0-7","4":"C:/Users/tdunn/Documents/R/win-library/4.1/bitops","5":"C:/Users/tdunn/Documents/R/win-library/4.1/bitops","6":"FALSE","7":"FALSE","8":"2021-04-24","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"bitops"},{"1":"broom","2":"0.7.10","3":"0.7.10","4":"C:/Users/tdunn/Documents/R/win-library/4.1/broom","5":"C:/Users/tdunn/Documents/R/win-library/4.1/broom","6":"FALSE","7":"FALSE","8":"2021-10-31","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"broom"},{"1":"bslib","2":"0.2.5.1","3":"0.2.5.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/bslib","5":"C:/Users/tdunn/Documents/R/win-library/4.1/bslib","6":"FALSE","7":"FALSE","8":"2021-05-18","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"bslib"},{"1":"cachem","2":"1.0.6","3":"1.0.6","4":"C:/Users/tdunn/Documents/R/win-library/4.1/cachem","5":"C:/Users/tdunn/Documents/R/win-library/4.1/cachem","6":"FALSE","7":"FALSE","8":"2021-08-19","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"cachem"},{"1":"callr","2":"3.7.0","3":"3.7.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/callr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/callr","6":"FALSE","7":"FALSE","8":"2021-04-20","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"callr"},{"1":"cellranger","2":"1.1.0","3":"1.1.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/cellranger","5":"C:/Users/tdunn/Documents/R/win-library/4.1/cellranger","6":"FALSE","7":"FALSE","8":"2016-07-27","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"cellranger"},{"1":"checkmate","2":"2.0.0","3":"2.0.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/checkmate","5":"C:/Users/tdunn/Documents/R/win-library/4.1/checkmate","6":"FALSE","7":"FALSE","8":"2020-02-06","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"checkmate"},{"1":"cli","2":"3.2.0","3":"3.2.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/cli","5":"C:/Users/tdunn/Documents/R/win-library/4.1/cli","6":"FALSE","7":"FALSE","8":"2022-02-14","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"cli"},{"1":"colorspace","2":"2.0.3","3":"2.0-3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/colorspace","5":"C:/Users/tdunn/Documents/R/win-library/4.1/colorspace","6":"FALSE","7":"FALSE","8":"2022-02-21","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"colorspace"},{"1":"crayon","2":"1.5.1","3":"1.5.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/crayon","5":"C:/Users/tdunn/Documents/R/win-library/4.1/crayon","6":"FALSE","7":"FALSE","8":"2022-03-26","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"crayon"},{"1":"DBI","2":"1.1.2","3":"1.1.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/DBI","5":"C:/Users/tdunn/Documents/R/win-library/4.1/DBI","6":"FALSE","7":"FALSE","8":"2021-12-20","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"DBI"},{"1":"dbplyr","2":"2.1.1","3":"2.1.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/dbplyr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/dbplyr","6":"FALSE","7":"FALSE","8":"2021-04-06","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"dbplyr"},{"1":"desc","2":"1.4.0","3":"1.4.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/desc","5":"C:/Users/tdunn/Documents/R/win-library/4.1/desc","6":"FALSE","7":"FALSE","8":"2021-09-28","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"desc"},{"1":"devtools","2":"2.4.3","3":"2.4.3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/devtools","5":"C:/Users/tdunn/Documents/R/win-library/4.1/devtools","6":"FALSE","7":"FALSE","8":"2021-11-30","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"devtools"},{"1":"digest","2":"0.6.29","3":"0.6.29","4":"C:/Users/tdunn/Documents/R/win-library/4.1/digest","5":"C:/Users/tdunn/Documents/R/win-library/4.1/digest","6":"FALSE","7":"FALSE","8":"2021-12-01","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"digest"},{"1":"distill","2":"1.3","3":"1.3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/distill","5":"C:/Users/tdunn/Documents/R/win-library/4.1/distill","6":"FALSE","7":"FALSE","8":"2021-10-13","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"distill"},{"1":"downlit","2":"0.4.0","3":"0.4.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/downlit","5":"C:/Users/tdunn/Documents/R/win-library/4.1/downlit","6":"FALSE","7":"FALSE","8":"2021-10-29","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"downlit"},{"1":"dplyr","2":"1.0.8","3":"1.0.8","4":"C:/Users/tdunn/Documents/R/win-library/4.1/dplyr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/dplyr","6":"TRUE","7":"FALSE","8":"2022-02-08","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"dplyr"},{"1":"dunnr","2":"0.2.5","3":"0.2.5","4":"C:/Users/tdunn/Documents/R/win-library/4.1/dunnr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/dunnr","6":"TRUE","7":"FALSE","8":"2022-01-15","9":"Github (taylordunn/dunnr@c83b30e)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"dunnr"},{"1":"ellipsis","2":"0.3.2","3":"0.3.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/ellipsis","5":"C:/Users/tdunn/Documents/R/win-library/4.1/ellipsis","6":"FALSE","7":"FALSE","8":"2021-04-29","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"ellipsis"},{"1":"evaluate","2":"0.14","3":"0.14","4":"C:/Users/tdunn/Documents/R/win-library/4.1/evaluate","5":"C:/Users/tdunn/Documents/R/win-library/4.1/evaluate","6":"FALSE","7":"FALSE","8":"2019-05-28","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"evaluate"},{"1":"extrafont","2":"0.17","3":"0.17","4":"C:/Users/tdunn/Documents/R/win-library/4.1/extrafont","5":"C:/Users/tdunn/Documents/R/win-library/4.1/extrafont","6":"FALSE","7":"FALSE","8":"2014-12-08","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"extrafont"},{"1":"extrafontdb","2":"1.0","3":"1.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/extrafontdb","5":"C:/Users/tdunn/Documents/R/win-library/4.1/extrafontdb","6":"FALSE","7":"FALSE","8":"2012-06-11","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"extrafontdb"},{"1":"fansi","2":"1.0.3","3":"1.0.3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/fansi","5":"C:/Users/tdunn/Documents/R/win-library/4.1/fansi","6":"FALSE","7":"FALSE","8":"2022-03-24","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"fansi"},{"1":"farver","2":"2.1.0","3":"2.1.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/farver","5":"C:/Users/tdunn/Documents/R/win-library/4.1/farver","6":"FALSE","7":"FALSE","8":"2021-02-28","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"farver"},{"1":"fastmap","2":"1.1.0","3":"1.1.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/fastmap","5":"C:/Users/tdunn/Documents/R/win-library/4.1/fastmap","6":"FALSE","7":"FALSE","8":"2021-01-25","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"fastmap"},{"1":"forcats","2":"0.5.1","3":"0.5.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/forcats","5":"C:/Users/tdunn/Documents/R/win-library/4.1/forcats","6":"TRUE","7":"FALSE","8":"2021-01-27","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"forcats"},{"1":"fs","2":"1.5.2","3":"1.5.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/fs","5":"C:/Users/tdunn/Documents/R/win-library/4.1/fs","6":"FALSE","7":"FALSE","8":"2021-12-08","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"fs"},{"1":"generics","2":"0.1.2","3":"0.1.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/generics","5":"C:/Users/tdunn/Documents/R/win-library/4.1/generics","6":"FALSE","7":"FALSE","8":"2022-01-31","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"generics"},{"1":"ggmap","2":"3.0.0.903","3":"3.0.0.903","4":"C:/Users/tdunn/Documents/R/win-library/4.1/ggmap","5":"C:/Users/tdunn/Documents/R/win-library/4.1/ggmap","6":"TRUE","7":"FALSE","8":"2022-04-23","9":"Github (dkahle/ggmap@7d27649)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"ggmap"},{"1":"ggplot2","2":"3.3.5","3":"3.3.5","4":"C:/Users/tdunn/Documents/R/win-library/4.1/ggplot2","5":"C:/Users/tdunn/Documents/R/win-library/4.1/ggplot2","6":"TRUE","7":"FALSE","8":"2021-06-25","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"ggplot2"},{"1":"ggrepel","2":"0.9.1","3":"0.9.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/ggrepel","5":"C:/Users/tdunn/Documents/R/win-library/4.1/ggrepel","6":"FALSE","7":"FALSE","8":"2021-01-15","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"ggrepel"},{"1":"glue","2":"1.6.2","3":"1.6.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/glue","5":"C:/Users/tdunn/Documents/R/win-library/4.1/glue","6":"TRUE","7":"FALSE","8":"2022-02-24","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"glue"},{"1":"gt","2":"0.3.1","3":"0.3.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/gt","5":"C:/Users/tdunn/Documents/R/win-library/4.1/gt","6":"TRUE","7":"FALSE","8":"2021-08-07","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"gt"},{"1":"gtable","2":"0.3.0","3":"0.3.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/gtable","5":"C:/Users/tdunn/Documents/R/win-library/4.1/gtable","6":"FALSE","7":"FALSE","8":"2019-03-25","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"gtable"},{"1":"haven","2":"2.4.1","3":"2.4.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/haven","5":"C:/Users/tdunn/Documents/R/win-library/4.1/haven","6":"FALSE","7":"FALSE","8":"2021-04-23","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"haven"},{"1":"highr","2":"0.9","3":"0.9","4":"C:/Users/tdunn/Documents/R/win-library/4.1/highr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/highr","6":"FALSE","7":"FALSE","8":"2021-04-16","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"highr"},{"1":"hms","2":"1.1.1","3":"1.1.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/hms","5":"C:/Users/tdunn/Documents/R/win-library/4.1/hms","6":"FALSE","7":"FALSE","8":"2021-09-26","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"hms"},{"1":"htmltools","2":"0.5.2","3":"0.5.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/htmltools","5":"C:/Users/tdunn/Documents/R/win-library/4.1/htmltools","6":"FALSE","7":"FALSE","8":"2021-08-25","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"htmltools"},{"1":"httr","2":"1.4.2","3":"1.4.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/httr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/httr","6":"TRUE","7":"FALSE","8":"2020-07-20","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"httr"},{"1":"janitor","2":"2.1.0","3":"2.1.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/janitor","5":"C:/Users/tdunn/Documents/R/win-library/4.1/janitor","6":"FALSE","7":"FALSE","8":"2021-01-05","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"janitor"},{"1":"jpeg","2":"0.1.9","3":"0.1-9","4":"C:/Users/tdunn/Documents/R/win-library/4.1/jpeg","5":"C:/Users/tdunn/Documents/R/win-library/4.1/jpeg","6":"FALSE","7":"FALSE","8":"2021-07-24","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"jpeg"},{"1":"jquerylib","2":"0.1.4","3":"0.1.4","4":"C:/Users/tdunn/Documents/R/win-library/4.1/jquerylib","5":"C:/Users/tdunn/Documents/R/win-library/4.1/jquerylib","6":"FALSE","7":"FALSE","8":"2021-04-26","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"jquerylib"},{"1":"jsonlite","2":"1.8.0","3":"1.8.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/jsonlite","5":"C:/Users/tdunn/Documents/R/win-library/4.1/jsonlite","6":"FALSE","7":"FALSE","8":"2022-02-22","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"jsonlite"},{"1":"knitr","2":"1.37","3":"1.37","4":"C:/Users/tdunn/Documents/R/win-library/4.1/knitr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/knitr","6":"FALSE","7":"FALSE","8":"2021-12-16","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"knitr"},{"1":"labeling","2":"0.4.2","3":"0.4.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/labeling","5":"C:/Users/tdunn/Documents/R/win-library/4.1/labeling","6":"FALSE","7":"FALSE","8":"2020-10-20","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"labeling"},{"1":"lattice","2":"0.20.45","3":"0.20-45","4":"C:/Program Files/R/R-4.1.3/library/lattice","5":"C:/Program Files/R/R-4.1.3/library/lattice","6":"FALSE","7":"FALSE","8":"2021-09-22","9":"CRAN (R 4.1.3)","10":"NA","11":"C:/Program Files/R/R-4.1.3/library","_rn_":"lattice"},{"1":"lifecycle","2":"1.0.1","3":"1.0.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/lifecycle","5":"C:/Users/tdunn/Documents/R/win-library/4.1/lifecycle","6":"FALSE","7":"FALSE","8":"2021-09-24","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"lifecycle"},{"1":"lubridate","2":"1.8.0","3":"1.8.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/lubridate","5":"C:/Users/tdunn/Documents/R/win-library/4.1/lubridate","6":"TRUE","7":"FALSE","8":"2021-10-07","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"lubridate"},{"1":"magrittr","2":"2.0.2","3":"2.0.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/magrittr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/magrittr","6":"FALSE","7":"FALSE","8":"2022-01-26","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"magrittr"},{"1":"memoise","2":"2.0.1","3":"2.0.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/memoise","5":"C:/Users/tdunn/Documents/R/win-library/4.1/memoise","6":"FALSE","7":"FALSE","8":"2021-11-26","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"memoise"},{"1":"modelr","2":"0.1.8","3":"0.1.8","4":"C:/Users/tdunn/Documents/R/win-library/4.1/modelr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/modelr","6":"FALSE","7":"FALSE","8":"2020-05-19","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"modelr"},{"1":"munsell","2":"0.5.0","3":"0.5.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/munsell","5":"C:/Users/tdunn/Documents/R/win-library/4.1/munsell","6":"FALSE","7":"FALSE","8":"2018-06-12","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"munsell"},{"1":"pillar","2":"1.7.0","3":"1.7.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/pillar","5":"C:/Users/tdunn/Documents/R/win-library/4.1/pillar","6":"FALSE","7":"FALSE","8":"2022-02-01","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"pillar"},{"1":"pkgbuild","2":"1.2.0","3":"1.2.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/pkgbuild","5":"C:/Users/tdunn/Documents/R/win-library/4.1/pkgbuild","6":"FALSE","7":"FALSE","8":"2020-12-15","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"pkgbuild"},{"1":"pkgconfig","2":"2.0.3","3":"2.0.3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/pkgconfig","5":"C:/Users/tdunn/Documents/R/win-library/4.1/pkgconfig","6":"FALSE","7":"FALSE","8":"2019-09-22","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"pkgconfig"},{"1":"pkgload","2":"1.2.1","3":"1.2.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/pkgload","5":"C:/Users/tdunn/Documents/R/win-library/4.1/pkgload","6":"FALSE","7":"FALSE","8":"2021-04-06","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"pkgload"},{"1":"plyr","2":"1.8.7","3":"1.8.7","4":"C:/Users/tdunn/Documents/R/win-library/4.1/plyr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/plyr","6":"FALSE","7":"FALSE","8":"2022-03-24","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"plyr"},{"1":"png","2":"0.1.7","3":"0.1-7","4":"C:/Users/tdunn/Documents/R/win-library/4.1/png","5":"C:/Users/tdunn/Documents/R/win-library/4.1/png","6":"FALSE","7":"FALSE","8":"2013-12-03","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"png"},{"1":"prettyunits","2":"1.1.1","3":"1.1.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/prettyunits","5":"C:/Users/tdunn/Documents/R/win-library/4.1/prettyunits","6":"FALSE","7":"FALSE","8":"2020-01-24","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"prettyunits"},{"1":"processx","2":"3.5.2","3":"3.5.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/processx","5":"C:/Users/tdunn/Documents/R/win-library/4.1/processx","6":"FALSE","7":"FALSE","8":"2021-04-30","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"processx"},{"1":"ps","2":"1.6.0","3":"1.6.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/ps","5":"C:/Users/tdunn/Documents/R/win-library/4.1/ps","6":"FALSE","7":"FALSE","8":"2021-02-28","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"ps"},{"1":"purrr","2":"0.3.4","3":"0.3.4","4":"C:/Users/tdunn/Documents/R/win-library/4.1/purrr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/purrr","6":"TRUE","7":"FALSE","8":"2020-04-17","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"purrr"},{"1":"R6","2":"2.5.1","3":"2.5.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/R6","5":"C:/Users/tdunn/Documents/R/win-library/4.1/R6","6":"FALSE","7":"FALSE","8":"2021-08-19","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"R6"},{"1":"RColorBrewer","2":"1.1.3","3":"1.1-3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/RColorBrewer","5":"C:/Users/tdunn/Documents/R/win-library/4.1/RColorBrewer","6":"FALSE","7":"FALSE","8":"2022-04-03","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"RColorBrewer"},{"1":"Rcpp","2":"1.0.8.3","3":"1.0.8.3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/Rcpp","5":"C:/Users/tdunn/Documents/R/win-library/4.1/Rcpp","6":"FALSE","7":"FALSE","8":"2022-03-17","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"Rcpp"},{"1":"readr","2":"2.1.1","3":"2.1.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/readr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/readr","6":"TRUE","7":"FALSE","8":"2021-11-30","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"readr"},{"1":"readxl","2":"1.3.1","3":"1.3.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/readxl","5":"C:/Users/tdunn/Documents/R/win-library/4.1/readxl","6":"FALSE","7":"FALSE","8":"2019-03-13","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"readxl"},{"1":"remotes","2":"2.4.2","3":"2.4.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/remotes","5":"C:/Users/tdunn/Documents/R/win-library/4.1/remotes","6":"FALSE","7":"FALSE","8":"2021-11-30","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"remotes"},{"1":"repr","2":"1.1.3","3":"1.1.3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/repr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/repr","6":"FALSE","7":"FALSE","8":"2021-01-21","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"repr"},{"1":"reprex","2":"2.0.0","3":"2.0.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/reprex","5":"C:/Users/tdunn/Documents/R/win-library/4.1/reprex","6":"FALSE","7":"FALSE","8":"2021-04-02","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"reprex"},{"1":"RgoogleMaps","2":"1.4.5.3","3":"1.4.5.3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/RgoogleMaps","5":"C:/Users/tdunn/Documents/R/win-library/4.1/RgoogleMaps","6":"FALSE","7":"FALSE","8":"2020-02-12","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"RgoogleMaps"},{"1":"rlang","2":"1.0.2","3":"1.0.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/rlang","5":"C:/Users/tdunn/Documents/R/win-library/4.1/rlang","6":"FALSE","7":"FALSE","8":"2022-03-04","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"rlang"},{"1":"rmarkdown","2":"2.11","3":"2.11","4":"C:/Users/tdunn/Documents/R/win-library/4.1/rmarkdown","5":"C:/Users/tdunn/Documents/R/win-library/4.1/rmarkdown","6":"FALSE","7":"FALSE","8":"2021-09-14","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"rmarkdown"},{"1":"rprojroot","2":"2.0.2","3":"2.0.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/rprojroot","5":"C:/Users/tdunn/Documents/R/win-library/4.1/rprojroot","6":"FALSE","7":"FALSE","8":"2020-11-15","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"rprojroot"},{"1":"rstudioapi","2":"0.13","3":"0.13","4":"C:/Users/tdunn/Documents/R/win-library/4.1/rstudioapi","5":"C:/Users/tdunn/Documents/R/win-library/4.1/rstudioapi","6":"FALSE","7":"FALSE","8":"2020-11-12","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"rstudioapi"},{"1":"Rttf2pt1","2":"1.3.8","3":"1.3.8","4":"C:/Users/tdunn/Documents/R/win-library/4.1/Rttf2pt1","5":"C:/Users/tdunn/Documents/R/win-library/4.1/Rttf2pt1","6":"FALSE","7":"FALSE","8":"2020-01-10","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"Rttf2pt1"},{"1":"rvest","2":"1.0.0","3":"1.0.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/rvest","5":"C:/Users/tdunn/Documents/R/win-library/4.1/rvest","6":"FALSE","7":"FALSE","8":"2021-03-09","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"rvest"},{"1":"sass","2":"0.4.0","3":"0.4.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/sass","5":"C:/Users/tdunn/Documents/R/win-library/4.1/sass","6":"FALSE","7":"FALSE","8":"2021-05-12","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"sass"},{"1":"scales","2":"1.2.0","3":"1.2.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/scales","5":"C:/Users/tdunn/Documents/R/win-library/4.1/scales","6":"FALSE","7":"FALSE","8":"2022-04-13","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"scales"},{"1":"sessioninfo","2":"1.1.1","3":"1.1.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/sessioninfo","5":"C:/Users/tdunn/Documents/R/win-library/4.1/sessioninfo","6":"FALSE","7":"FALSE","8":"2018-11-05","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"sessioninfo"},{"1":"skimr","2":"2.1.3","3":"2.1.3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/skimr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/skimr","6":"FALSE","7":"FALSE","8":"2021-03-07","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"skimr"},{"1":"snakecase","2":"0.11.0","3":"0.11.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/snakecase","5":"C:/Users/tdunn/Documents/R/win-library/4.1/snakecase","6":"FALSE","7":"FALSE","8":"2019-05-25","9":"CRAN (R 4.1.1)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"snakecase"},{"1":"sp","2":"1.4.7","3":"1.4-7","4":"C:/Users/tdunn/Documents/R/win-library/4.1/sp","5":"C:/Users/tdunn/Documents/R/win-library/4.1/sp","6":"FALSE","7":"FALSE","8":"2022-04-20","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"sp"},{"1":"stringi","2":"1.7.6","3":"1.7.6","4":"C:/Users/tdunn/Documents/R/win-library/4.1/stringi","5":"C:/Users/tdunn/Documents/R/win-library/4.1/stringi","6":"FALSE","7":"FALSE","8":"2021-11-29","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"stringi"},{"1":"stringr","2":"1.4.0","3":"1.4.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/stringr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/stringr","6":"TRUE","7":"FALSE","8":"2019-02-10","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"stringr"},{"1":"testthat","2":"3.1.1","3":"3.1.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/testthat","5":"C:/Users/tdunn/Documents/R/win-library/4.1/testthat","6":"FALSE","7":"FALSE","8":"2021-12-03","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"testthat"},{"1":"tibble","2":"3.1.6","3":"3.1.6","4":"C:/Users/tdunn/Documents/R/win-library/4.1/tibble","5":"C:/Users/tdunn/Documents/R/win-library/4.1/tibble","6":"TRUE","7":"FALSE","8":"2021-11-07","9":"CRAN (R 4.1.1)","10":"NA","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"tibble"},{"1":"tidyr","2":"1.2.0","3":"1.2.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/tidyr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/tidyr","6":"TRUE","7":"FALSE","8":"2022-02-01","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"tidyr"},{"1":"tidyselect","2":"1.1.2","3":"1.1.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/tidyselect","5":"C:/Users/tdunn/Documents/R/win-library/4.1/tidyselect","6":"FALSE","7":"FALSE","8":"2022-02-21","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"tidyselect"},{"1":"tidyverse","2":"1.3.1","3":"1.3.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/tidyverse","5":"C:/Users/tdunn/Documents/R/win-library/4.1/tidyverse","6":"TRUE","7":"FALSE","8":"2021-04-15","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"tidyverse"},{"1":"tzdb","2":"0.2.0","3":"0.2.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/tzdb","5":"C:/Users/tdunn/Documents/R/win-library/4.1/tzdb","6":"FALSE","7":"FALSE","8":"2021-10-27","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"tzdb"},{"1":"usethis","2":"2.1.5","3":"2.1.5","4":"C:/Users/tdunn/Documents/R/win-library/4.1/usethis","5":"C:/Users/tdunn/Documents/R/win-library/4.1/usethis","6":"FALSE","7":"FALSE","8":"2021-12-09","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"usethis"},{"1":"utf8","2":"1.2.2","3":"1.2.2","4":"C:/Users/tdunn/Documents/R/win-library/4.1/utf8","5":"C:/Users/tdunn/Documents/R/win-library/4.1/utf8","6":"FALSE","7":"FALSE","8":"2021-07-24","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"utf8"},{"1":"vctrs","2":"0.4.1","3":"0.4.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/vctrs","5":"C:/Users/tdunn/Documents/R/win-library/4.1/vctrs","6":"FALSE","7":"FALSE","8":"2022-04-13","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"vctrs"},{"1":"withr","2":"2.5.0","3":"2.5.0","4":"C:/Users/tdunn/Documents/R/win-library/4.1/withr","5":"C:/Users/tdunn/Documents/R/win-library/4.1/withr","6":"FALSE","7":"FALSE","8":"2022-03-03","9":"CRAN (R 4.1.3)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"withr"},{"1":"xfun","2":"0.29","3":"0.29","4":"C:/Users/tdunn/Documents/R/win-library/4.1/xfun","5":"C:/Users/tdunn/Documents/R/win-library/4.1/xfun","6":"FALSE","7":"FALSE","8":"2021-12-14","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"xfun"},{"1":"xml2","2":"1.3.3","3":"1.3.3","4":"C:/Users/tdunn/Documents/R/win-library/4.1/xml2","5":"C:/Users/tdunn/Documents/R/win-library/4.1/xml2","6":"FALSE","7":"FALSE","8":"2021-11-30","9":"CRAN (R 4.1.2)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"xml2"},{"1":"yaml","2":"2.2.1","3":"2.2.1","4":"C:/Users/tdunn/Documents/R/win-library/4.1/yaml","5":"C:/Users/tdunn/Documents/R/win-library/4.1/yaml","6":"FALSE","7":"FALSE","8":"2020-02-01","9":"CRAN (R 4.1.0)","10":"TRUE","11":"C:/Users/tdunn/Documents/R/win-library/4.1","_rn_":"yaml"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</details>
<details>
<summary>
Git repository
</summary>
<div class="layout-chunk" data-layout="l-body">
<pre><code>Local:    bike-ridership C:/Users/tdunn/Documents/tdunn
Head:     [174a16f] 2022-04-26: Finished first draft</code></pre>
</div>
</details>
<div class="layout-chunk" data-layout="l-body">
<p><a href="https://github.com/taylordunn/tdunn/tree/main/_posts/2022-04-27-predicting-bike-ridership-getting-the-data">Source code</a></p>
</div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>Went through some trial and error to get the <code>get_googlemap()</code> function working here. In brief, I (1) downloaded the development version of <code>ggmap</code> from GitHub (<code>remotes::install_github("dkahle/ggmap")</code>) (2) created a new project on my Google Cloud Platform (GCP) account, (3) added an API key with access to the Google Static Maps API and registered it with <code>register_google()</code>, and (4) had to enable billing (because my free trial had been used).<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>To build these API queries, I found <a href="https://api.weather.gc.ca/openapi?f=html#/">this documentation</a> to be very helpful.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Dunn (2022, April 27). tdunn: Predicting bike ridership: getting the data. Retrieved from https://tdunn.ca/posts/2022-04-23-predicting-bike-ridership-getting-the-data/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{dunn2022predicting,
  author = {Dunn, Taylor},
  title = {tdunn: Predicting bike ridership: getting the data},
  url = {https://tdunn.ca/posts/2022-04-23-predicting-bike-ridership-getting-the-data/},
  year = {2022}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
